!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.bearcat=a()}}(function(){var define,module,exports;return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){a("./lib/util/requireUtil"),b.exports=a("./lib/bearcat")},{"./lib/bearcat":19,"./lib/util/requireUtil":32}],2:[function(a,b){var c=a("./pointcut"),d=function(){this.pointcut=null,this.beanName=null,this.runtime=null,this.advice=null,this.order=null,this.bean=null};b.exports=d,d.prototype.setPointcut=function(a){if(a){var b=new c;b.setExpression(a),this.pointcut=b}},d.prototype.getPointcut=function(){return this.pointcut},d.prototype.setAdvice=function(a){this.advice=a},d.prototype.getAdvice=function(){return this.advice},d.prototype.setBeanName=function(a){this.beanName=a},d.prototype.getBeanName=function(){return this.beanName},d.prototype.setBean=function(a){this.bean=a},d.prototype.getBean=function(){return this.bean},d.prototype.setOrder=function(a){this.order=a},d.prototype.getOrder=function(){return this.order},d.prototype.setRuntime=function(a){this.runtime=a},d.prototype.isRuntime=function(){return this.runtime},d.prototype.parse=function(){this.pointcut.parse()}},{"./pointcut":9}],3:[function(a,b){var c=function(){this.advisors=[],this.beanName=null,this.beanDefinition=null,this.bean=null};b.exports=c,c.prototype.addAdvisor=function(a){this.advisors.push(a)},c.prototype.getAdvisors=function(){return this.advisors},c.prototype.setBeanDefinition=function(a){this.beanDefinition=a},c.prototype.getBeanDefinition=function(){return this.beanDefinition},c.prototype.setBeanName=function(a){this.beanName=a},c.prototype.getBeanName=function(){return this.beanName},c.prototype.setBean=function(a){this.bean=a},c.prototype.getBean=function(){return this.bean}},{}],4:[function(a,b){var c=a("../framework/proxyFactory"),d=a("../targetSource"),e=a("../../util/aopUtil"),f=a("../../util/utils"),g=function(){this.beanFactory=null};b.exports=g,g.prototype.before=function(a){return a},g.prototype.after=function(a,b){return this.wrapIfNecessary(a,b)},g.prototype.setBeanFactory=function(a){this.beanFactory=a},g.prototype.getBeanFactory=function(){return this.beanFactory},g.prototype.wrapIfNecessary=function(a,b){var c=this.beanFactory.getBeanDefinition(b);if(!c.needProxy())return a;if(c.isAspect())return a;var e=this.getAdvisorsForBean(a,b);if(f.checkArray(e)&&e.length){var g=this.createProxy(a,b,e,new d(b,a));return g}return a},g.prototype.createProxy=function(a,b,d,f){var g=new c;g.setBeanFactory(this.getBeanFactory()),g.setTarget(f);var h=e.getMethodsFromObject(a);g.setInterfaces(h);for(var i=0;i<d.length;i++)g.addAdvisor(d[i]);return g.getProxy()},g.prototype.getAdvisorsForBean=function(a,b){return this.findEligibleAdvisors(a,b)},g.prototype.findEligibleAdvisors=function(a,b){var c=this.findCandidateAdvisors(a,b);return this.findAdvisorsThatCanApply(a,b,c)},g.prototype.findCandidateAdvisors=function(a,b){for(var c=this.beanFactory.getAspects(),d=[],e=0;e<c.length;e++){var f=c[e],b=f.getBeanName(),g=this.beanFactory.getBean(b);f.setBean(g);for(var h=f.getAdvisors(),i=0;i<h.length;i++){var j=h[i];j.setBean(g),d.push(j)}}return d},g.prototype.findAdvisorsThatCanApply=function(a,b,c){for(var d=[],f=0;f<c.length;f++){var g=c[f];this.canApply(g,a,b)&&d.push(g)}return d=e.sortAdvisorsByOrder(d)},g.prototype.canApply=function(a,b,c){for(var d=e.getMethodsFromObject(b),f=a.getPointcut(),g=0;g<d.length;g++){var h=c+"."+d[g];if(f.match(h))return!0}return!1}},{"../../util/aopUtil":26,"../../util/utils":34,"../framework/proxyFactory":8,"../targetSource":10}],5:[function(a,b){var c=a("../../util/utils"),d=function(){this.advisors=[],this.interfaces=[],this.methodCache={},this.beanFactory=null,this.targetSource=null,this.advisorChainFactory=null};b.exports=d,d.prototype.setTarget=function(a){this.setTargetSource(a)},d.prototype.setTargetSource=function(a){this.targetSource=a},d.prototype.getTargetSource=function(){return this.targetSource},d.prototype.setInterfaces=function(a){for(var b=0;b<a.length;b++)this.addInterface(a[b])},d.prototype.addInterface=function(a){this.interfaces.push(a)},d.prototype.getInterfaces=function(){return this.interfaces},d.prototype.getAdvisors=function(){return this.advisors},d.prototype.addAdvisor=function(a){this.advisors.push(a)},d.prototype.getBeanFactory=function(){return this.beanFactory},d.prototype.setBeanFactory=function(a){this.beanFactory=a},d.prototype.getInterceptionAdvice=function(a,b,c){var d=a+"_"+c,e=this.methodCache[d];return e||(e=this.doGetInterceptionAdvice(a,b,c),this.methodCache[d]=e),e},d.prototype.doGetInterceptionAdvice=function(a,b,d){for(var e=[],f=this.getAdvisors(),g=b+"."+a,h=0;h<f.length;h++){var i=f[h],j=i.getPointcut();j.getAdviceType()===d&&j.match(g)&&e.push(i)}return e.sort(c.compareByOrder),e}},{"../../util/utils":34}],6:[function(a,b){var c=a("pomelo-logger").getLogger("bearcat","DynamicAopProxy"),d=a("../../util/constant"),e=a("../../util/utils"),f=function(a){this.advised=a,this.dyInit()};b.exports=f,f.prototype.dyInit=function(){if(!this.advised)return void c.error("DynamicAopProxy init error no advised");for(var a=this.advised.getInterfaces(),b=this,d=0;d<a.length;d++)!function(a){return h(a)?void c.error("init error proxy method interface %j the same as DynamicAopProxy, rename this name to another.",a):void(b[a]=function(){return arguments=Array.prototype.slice.apply(arguments),b.dyInvoke(a,arguments)})}(a[d])},f.prototype.dyInvoke=function(a,b){var c=this,f=b.pop(),g=!1;e.checkFunction(f)||(b.push(f),f=function(){},g=!0);var h=this.advised.getTargetSource(),i=h.getBeanName(),j=h.getTarget(),k=d.AOP_ADVICE_BEFORE,l=this.advised.getInterceptionAdvice(a,i,k);k=d.AOP_ADVICE_AROUND;var m=this.advised.getInterceptionAdvice(a,i,k),n=!1;e.checkArray(m)&&m.length&&(n=!0),k=d.AOP_ADVICE_AFTER;var o=this.advised.getInterceptionAdvice(a,i,k),p=!1;return e.checkArray(o)&&o.length&&(p=!0),this.doInvokeAdvisorsBefore(a,b,l,function(d){if(d)return f(d);if(!n){var e=function(){arguments=Array.prototype.slice.apply(arguments),f.apply(null,arguments),c.doInvokeAdvisorsAfter(a,arguments,o,function(){})};if(g){var h=j[a].apply(j,b);return p&&c.doInvokeAdvisorsAfter(a,h,o,function(){}),h}return b.push(e),j[a].apply(j,b)}c.doInvokeAdvisorsAround(j,a,b,m,function(){arguments=Array.prototype.slice.apply(arguments),f.apply(null,arguments),c.doInvokeAdvisorsAfter(a,arguments,o,function(){})})})},f.prototype.doInvokeAdvisorsBefore=function(a,b,c,d){var f=0;if(b=Array.prototype.slice.apply(b),!c||!e.checkArray(c)||!c.length)return d();var g=function(a){if(a||f>=c.length)return d(a);var e=c[f++],h=e.getAdvice(),i=e.getBean(),j=function(a){g(a)};e.isRuntime()?(b.push(j),i[h].apply(i,b)):i[h](j)};g()},f.prototype.doInvokeAdvisorsAround=function(a,b,c,d,f){var g=d[0],h=g.getAdvice(),i=g.getBean();e.checkObject(c)&&(c=Array.prototype.slice.apply(c)),g.isRuntime()?(c.unshift(b),c.unshift(a),c.push(f),i[h].apply(i,c)):i[h](a,b,f)},f.prototype.doInvokeAdvisorsAfter=function(a,b,c,d){var f=0;if(!c||!e.checkArray(c)||!c.length)return d();e.checkObject(b)?b=Array.prototype.slice.apply(b):e.checkArray(b)||(b=[b]);var g=function(a){if(a||f>=c.length)return d(a);var e=c[f++],h=e.getAdvice(),i=e.getBean(),j=function(a){g(a)};b.push(j),i[h].apply(i,b)};g()};var g=["dyInit","dyInvoke","doInvokeAdvisorsBefore","doInvokeAdvisorsAround","doInvokeAdvisorsAfter"],h=function(a){for(var b=0;b<g.length;b++)if(a===g[b])return!0;return!1}},{"../../util/constant":28,"../../util/utils":34,"pomelo-logger":46}],7:[function(a,b){var c=a("pomelo-logger").getLogger("bearcat","DynamicMetaProxy"),d=a("../../util/utils"),e=function(){this.args=null,this.target=null,this.beanFactory=null,this.beanDefinition=null};b.exports=e,e.prototype.dyInit=function(){var a=this.getBeanDefinition();if(!a)return void c.error("init error no beanDefinition.");var b=this,e=a.getFunc();if(d.checkFunction(e)){var f=e.prototype;for(interface in f)d.checkFunction(f[interface])&&!function(a){return g(a)?void c.error("init error proxy method interface %j the same as DynamicMetaProxy, rename this name to another.",a):void(b[a]=function(){return arguments=Array.prototype.slice.apply(arguments),b.dyInvoke(a,arguments)})}(interface)}},e.prototype.dyInvoke=function(a,b){var c=this.getBean();return d.checkFunction(c[a])?c[a].apply(c,b):void 0},e.prototype.getBean=function(){var a=this.getArgs(),b=this.getBeanFactory();return this.getTarget()||this.setTarget(b.getBean.apply(b,a)),this.target},e.prototype.setArgs=function(a){this.args=a},e.prototype.getArgs=function(){return this.args},e.prototype.setTarget=function(a){this.target=a},e.prototype.getTarget=function(){return this.target},e.prototype.setBeanFactory=function(a){this.beanFactory=a},e.prototype.getBeanFactory=function(){return this.beanFactory},e.prototype.setBeanDefinition=function(a){this.beanDefinition=a},e.prototype.getBeanDefinition=function(){return this.beanDefinition};var f=["dyInit","dyInvoke","getBean","setBeanName","getBeanName","setMeta","getMeta","setTarget","setBeanFactory","getBeanFactory"],g=function(a){for(var b=0;b<f.length;b++)if(a===f[b])return!0;return!1}},{"../../util/utils":34,"pomelo-logger":46}],8:[function(a,b){var c=a("../../util/requireUtil"),d=a("./dynamicAopProxy"),e=a("./advisedSupport"),f=a("../../util/utils"),g=c.requireUtil(),h=function(a,b){this.beanFactory=null,e.call(this),a&&this.setTarget(a),f.checkArray(b)&&this.setInterfaces(b)};g.inherits(h,e),b.exports=h,h.prototype.getProxy=function(){var a=(this.getBeanFactory(),new d(this));return a}},{"../../util/requireUtil":32,"../../util/utils":34,"./advisedSupport":5,"./dynamicAopProxy":6}],9:[function(a,b){var c=a("../util/utils"),d=function(){this.expression=null,this.adviceType=null,this.targetExpression=null};b.exports=d,d.prototype.setExpression=function(a){this.expression=a},d.prototype.getExpression=function(){return this.expression},d.prototype.setAdviceType=function(a){this.adviceType=a},d.prototype.getAdviceType=function(){return this.adviceType},d.prototype.setTargetExpression=function(a){this.targetExpression=new RegExp(a)},d.prototype.getTargetExpression=function(){return this.targetExpression},d.prototype.parse=function(){var a=this.getExpression();if(a){var b=a.split(":");c.checkArray(b)&&2===b.length&&(this.setAdviceType(b[0]),this.setTargetExpression(b[1]))}},d.prototype.match=function(a){var b=this.getTargetExpression();return a.match(b)}},{"../util/utils":34}],10:[function(a,b){var c=function(a,b){this.beanName=a,this.target=b};b.exports=c,c.prototype.setBeanName=function(a){this.beanName=a},c.prototype.getBeanName=function(){return this.beanName},c.prototype.setTarget=function(a){this.target=a},c.prototype.getTarget=function(){return this.target},c.prototype.releaseTarget=function(){}},{}],11:[function(a,b){var c=a("pomelo-logger").getLogger("bearcat","BeanFactory"),d=a("../aop/framework/dynamicMetaProxy"),e=a("./singletonBeanFactory"),f=a("./support/beanDefinition"),g=a("../util/validatorUtil"),h=a("../util/constant"),i=a("../util/beanUtil"),j=a("../util/aopUtil"),k=(a("../aop/aspect"),a("../util/utils")),l=function(){this.aspects=[],this.initCbMap={},this.beanCurMap={},this.beanFunctions={},this.beanDefinitions={},this.beanPostProcessors=[],this.singletonBeanFactory=new e};b.exports=l,l.prototype.getBean=function(a){if(this.beanCurMap[a])return void c.error("circle reference beanName "+a+" is in creating");arguments=Array.prototype.slice.apply(arguments),this.beanCurMap[a]=!0;var b=this.doGetBean.apply(this,arguments);return delete this.beanCurMap[a],b},l.prototype.getBeanProxy=function(){arguments=Array.prototype.slice.apply(arguments);var a=this.doGetBeanProxy.apply(this,arguments);return a},l.prototype.doGetBean=function(a){var b=this.getBeanDefinition(a);return b?(arguments=Array.prototype.slice.apply(arguments),b.isAbstract()?(c.warn("abstract bean can not get bean instance, you can use bearcat.getFunction to get constructor function of the bean"),this.getBeanFunction(a)):(b.hasParentBean()&&(b=this.setParentBean(a)),b.isSingleton()?(arguments.push(this),this.singletonBeanFactory.getSingleton.apply(this.singletonBeanFactory,arguments)):b.isPrototype()?this.createBean.apply(this,arguments):void 0)):(c.error("BeanFactory beanDefinition null for %j",a),null)},l.prototype.doGetBeanProxy=function(a){var b=this.getBeanDefinition(a);if(!b)return c.error("BeanFactory beanDefinition null for %j",a),null;arguments=Array.prototype.slice.apply(arguments);var e=new d;return e.setBeanDefinition(b),e.setBeanFactory(this),e.setArgs(arguments),e.dyInit(),e},l.prototype.createBean=function(a){var b=this.doCreateBean.apply(this,arguments);return b=this.initBean(b,a,this.getInitCb(a))},l.prototype.doCreateBean=function(a){var b=this.getBeanDefinition(a);if(!b)return null;if(b.hasFactoryBean())return this.getBeanFromFactoryBean.apply(this,arguments);var c=Array.prototype.slice.apply(arguments);c.shift();var d=b.getArgsOn(),e=b.getPropsOn(),f=this.getBeanFunction(a);if(!f)return null;var g=this.getDependsBeanValues(d,c),i=this.getDependsApplyArgs(g),j=Object.create(f.prototype);if(f.apply(j,i),g=this.getDependsBeanValues(e),k.checkArray(g))for(var l=0;l<g.length;l++){var m=g[l],n=m.getName();m.getDependType()===h.DEPEND_TYPE_BEAN?j[n]=m.getBean():m.getDependType()===h.DEPEND_TYPE_VALUE&&(j[n]=m.getValue())}return j},l.prototype.initBean=function(a,b,c){var d=this.getBeanDefinition(b);if(d)return a=this.applyBeanPostProcessorsBeforeInitialization(a,b),this.invokeInitMethods(a,b,c),a=this.applyBeanPostProcessorsAfterInitialization(a,b)},l.prototype.invokeInitMethods=function(a,b,c){var d=this.getBeanDefinition(b);if(d&&d.hasInitMethod()){var e=d.getInitMethodName(),f=a[e];k.checkFunction(f)&&f.call(a,c)}},l.prototype.getBeanFromFactoryBean=function(a){var b=this.getBeanDefinition(a),c=Array.prototype.slice.apply(arguments);c.shift();var d=b.getFactoryBeanName(),e=b.getFactoryMethodName(),f=b.getFactoryArgsOn(),g=this.getBean(d);if(!g)return null;var h=g[e],i=this.getDependsBeanValues(f,c),j=this.getDependsApplyArgs(i),k=h.apply(g,j);return k},l.prototype.getDependsBeanValues=function(a,b){var c=[];if(!k.checkArray(a))return c;for(var d=0;d<a.length;d++){var e=a[d],f=e.getRef();if(e.getDependType()===h.DEPEND_TYPE_BEAN){var g=this.getBean(f);g&&e.setBean(g)}if(k.checkArray(b)&&e.getDependType()===h.DEPEND_TYPE_VAR){var i=b.shift();e.setValue(i)}c.push(e)}return c},l.prototype.getDependsApplyArgs=function(a){var b=[];if(!k.checkArray(a))return b;for(var d=0;d<a.length;d++){var e=a[d];e.getDependType()===h.DEPEND_TYPE_BEAN?b.push(e.getBean()):e.getDependType()===h.DEPEND_TYPE_VALUE?b.push(e.getValue()):e.getDependType()===h.DEPEND_TYPE_VAR?b.push(e.getValueOnce()):c.error("getDependsApplyArgs depends args type error %j",e)}return b},l.prototype.setParentBean=function(a){var b=this.getBeanDefinition(a);if(!b)return null;var c=b.getParentName(),d=this.getBeanDefinition(c),e=this.getBeanFunction(a),f=this.getBeanFunction(c);if(f){var g=f.prototype;for(var h in g)e.prototype[h]||(e.prototype[h]=g[h])}return d&&(b.setParentBean(d),b.setArgsOn(d.getArgs()),b.setPropsOn(d.getProps()),b.setFactoryArgsOn(d.getFactoryArgs())),b},l.prototype.registryBeans=function(a){for(var b in a)this.registryBean(b,a[b])},l.prototype.registryBean=function(a,b){var d=b.func;if(d&&k.checkFunction(d)&&!this.getBeanFunction(a)&&this.setBeanFunction(a,d),!g.metaValidator(b))return void c.error("registryBean %j metaObject %j validate error",a,b);var e=b.order,l=b.parent,m=b.init,n=b.destroy,o=b.factoryBean,p=b.factoryMethod,q=b.scope||h.SCOPE_DEFAULT,r=b.args||h.ARGS_DEFAULT,s=b.props||h.PROPS_DEFAULT,t=b.factoryArgs||h.ARGS_DEFAULT,u=b.async||h.ASYNC_INIT_DEFAULT,v=b.lazy||h.LAZY_INIT_DEFAULT,w=b["abstract"]||h.ABSTRACT_DEFAULT,x=b.proxy;k.isNotNull(x)||(x=h.PROXY_DEFAULT);var y=b.aop,z=null;if(z=this.getBeanDefinition(a),z||(z=new f),z.setFunc(d),z.setOrder(e),z.setScope(q),z.setProxy(x),z.setBeanName(a),z.setLazyInit(v),z.setAbstract(w),z.setAsyncInit(u),z.setParentName(l),z.setInitMethodName(m),z.setFactoryBeanName(o),z.setFactoryMethodName(p),z.setDestroyMethodName(n),z.setArgsOn(i.buildBeanWrapper(r)),z.setPropsOn(i.buildBeanWrapper(s)),z.setFactoryArgsOn(i.buildBeanWrapper(t)),y&&k.checkArray(y)){var A=j.buildAspect(y,z);this.aspects.push(A),z.setAspect(!0)}this.beanDefinitions[a]=z},l.prototype.preInstantiateSingletons=function(a){var b=i.sortBeanDefinitions(this.beanDefinitions,this),c=this,d=0,e=function(f){if(f||d>=b.length)return a(f);var g=b[d++],h=g.getBeanName();if(g.isAsyncInit())if(c.singletonBeanFactory.containsSingleton(h))c.getBean(h),e();else{var i=function(){e()};c.setInitCb(h,i),c.getBean(h)}else{var i=function(){};c.setInitCb(h,i),c.getBean(h),e()}};e()},l.prototype.addBeanPostProcessor=function(a){this.beanPostProcessors.push(a)},l.prototype.getBeanPostProcessors=function(){return this.beanPostProcessors},l.prototype.applyBeanPostProcessorsBeforeInitialization=function(a,b){for(var c=a,d=this.getBeanPostProcessors(),e=0;e<d.length;e++){var f=d[e];if(c=f.before(c,b),!c)return c}return c},l.prototype.applyBeanPostProcessorsAfterInitialization=function(a,b){for(var c=a,d=this.getBeanPostProcessors(),e=0;e<d.length;e++){var f=d[e];if(c=f.after(c,b),!c)return c}return c},l.prototype.destroySingletons=function(){for(var a=this.singletonBeanFactory.getSingletonNames(),b=0;b<a.length;b++)this.destroySingleton(a[b])},l.prototype.destroyBeanFactory=function(){this.initCbMap=null,this.beanCurMap=null,this.beanFunctions=null,this.beanDefinitions=null,this.singletonBeanFactory=null},l.prototype.destroySingleton=function(a){var b=this.getBeanDefinition(a);if(b){var c=this.getBean(a);this.destroyBean(a,c),this.singletonBeanFactory.removeSingleton(a)}},l.prototype.destroyBean=function(a,b){var c=this.getBeanDefinition(a);if(c){var d=c.getDestroyMethodName(),e=b[d];k.checkFunction(e)&&e.call(b),this.removeFunction(a),this.removeBeanDefinition(a)}},l.prototype.isSingleton=function(a){var b=this.getBeanDefinition(a);return b?b.isSingleton():!1},l.prototype.isPrototype=function(a){var b=this.getBeanDefinition(a);return b?b.isPrototype():!1},l.prototype.containsBean=function(a){return!!this.getBeanFunction(a)&&!!this.getBeanDefinition(a)},l.prototype.getBeanFunction=function(a){return this.beanFunctions[a]},l.prototype.setBeanFunction=function(a,b){this.beanFunctions[a]=b},l.prototype.removeFunction=function(a){delete this.beanFunctions[a]},l.prototype.getInitCb=function(a){return this.initCbMap[a]||(this.initCbMap[a]=h.INIT_CB_DEFAULT),this.initCbMap[a]},l.prototype.setInitCb=function(a,b){this.initCbMap[a]=b},l.prototype.getBeanDefinition=function(a){return this.beanDefinitions[a]},l.prototype.getBeanDefinitions=function(){return this.beanDefinitions},l.prototype.removeBeanDefinition=function(a){delete this.beanDefinitions[a]},l.prototype.containsBeanDefinition=function(a){return!!this.getBeanDefinition(a)},l.prototype.getAspects=function(){return this.aspects}},{"../aop/aspect":3,"../aop/framework/dynamicMetaProxy":7,"../util/aopUtil":26,"../util/beanUtil":27,"../util/constant":28,"../util/utils":34,"../util/validatorUtil":35,"./singletonBeanFactory":12,"./support/beanDefinition":13,"pomelo-logger":46}],12:[function(a,b){var c=(a("pomelo-logger").getLogger("bearcat","SingletonBeanFactory"),function(){this.singletonObjects={}});b.exports=c,c.prototype.addSingleton=function(a,b){this.singletonObjects[a]=b},c.prototype.containsSingleton=function(a){return!!this.singletonObjects[a]},c.prototype.getSingleton=function(a,b){arguments=Array.prototype.slice.apply(arguments),b=arguments.pop();var c=this.singletonObjects[a];return c?c:(c=b.createBean.apply(b,arguments),this.addSingleton(a,c),c)},c.prototype.getSingletonNames=function(){var a=[];for(var b in this.singletonObjects)a.push(b);return a},c.prototype.removeSingleton=function(a){delete this.singletonObjects[a]}},{"pomelo-logger":46}],13:[function(a,b){var c=a("../../util/constant"),d=a("../../util/beanUtil"),e=a("../../util/utils"),f=function(){this.argsOn=[],this.propsOn=[],this.func=null,this.order=null,this.proxy=!0,this.aspect=!1,this["abstract"]=!1,this.lazyInit=!1,this.asyncInit=!1,this.parentName=null,this.parentBean=null,this.beanName=null,this.factoryArgsOn={},this.factoryBeanName=null,this.factoryMethodName=null,this.initMethodName=null,this.destroyMethodName=null,this.scope=c.SCOPE_DEFAULT};b.exports=f,f.prototype.getParentName=function(){return this.parentName},f.prototype.setParentName=function(a){a&&(this.parentName=a)},f.prototype.hasParentBean=function(){return this.getParentName()&&!this.getParentBean()},f.prototype.getParentBean=function(){return this.parentBean},f.prototype.setParentBean=function(a){a&&(this.parentBean=a)},f.prototype.getBeanName=function(){return this.beanName},f.prototype.setBeanName=function(a){return a?this.beanName=a:void 0},f.prototype.getFactoryBeanName=function(){return this.factoryBeanName?this.factoryBeanName:this.parentBean?this.parentBean.factoryBeanName:void 0},f.prototype.setFactoryBeanName=function(a){a&&(this.factoryBeanName=a)},f.prototype.getFactoryMethodName=function(){return this.factoryMethodName?this.factoryMethodName:this.parentBean?this.parentBean.factoryMethodName:void 0},f.prototype.setFactoryMethodName=function(a){a&&(this.factoryMethodName=a)},f.prototype.getScope=function(){return this.scope},f.prototype.setScope=function(a){a&&(this.scope=a)},f.prototype.isAbstract=function(){return this["abstract"]},f.prototype.setAbstract=function(a){e.isNotNull(a)&&(this["abstract"]=a)},f.prototype.isLazyInit=function(){return this.lazyInit?this.lazyInit:this.parentBean?this.parentBean.lazyInit:void 0},f.prototype.setLazyInit=function(a){e.isNotNull(a)&&(this.lazyInit=a)},f.prototype.needProxy=function(){return this.proxy},f.prototype.setProxy=function(a){e.isNotNull(a)&&(this.proxy=a)},f.prototype.isAsyncInit=function(){return this.asyncInit?this.asyncInit:this.parentBean?this.parentBean.asyncInit:void 0},f.prototype.setAsyncInit=function(a){e.isNotNull(a)&&(this.asyncInit=a)},f.prototype.setAspect=function(a){e.isNotNull(a)&&(this.aspect=a)},f.prototype.isAspect=function(){return this.aspect?this.aspect:this.parentBean?this.parentBean.aspect:void 0},f.prototype.getProps=function(){return this.propsOn},f.prototype.getPropsOn=function(){return this.propsOn},f.prototype.setPropsOn=function(a){a&&e.checkArray(a)&&a.length&&this.updateSettingsOn(this,c.SETTINGS_PROPS_ON,a)},f.prototype.getArgs=function(){return this.argsOn},f.prototype.getArgsOn=function(){return this.argsOn},f.prototype.setArgsOn=function(a){a&&e.checkArray(a)&&a.length&&this.updateSettingsOn(this,c.SETTINGS_ARGS_ON,a)},f.prototype.getFactoryArgs=function(){return this.factoryArgsOn},f.prototype.getFactoryArgsOn=function(){return this.factoryArgsOn},f.prototype.setFactoryArgsOn=function(a){a&&e.checkArray(a)&&a.length&&this.updateSettingsOn(this,c.SETTINGS_FACTORY_ARGS_ON,a)},f.prototype.getInitMethodName=function(){return this.initMethodName?this.initMethodName:this.parentBean?this.parentBean.initMethodName:void 0},f.prototype.setInitMethodName=function(a){a&&(this.initMethodName=a)},f.prototype.getDestroyMethodName=function(){return this.destroyMethodName?this.destroyMethodName:this.parentBean?this.parentBean.destroyMethodName:void 0},f.prototype.setDestroyMethodName=function(a){a&&(this.destroyMethodName=a)},f.prototype.getFunc=function(){return this.func},f.prototype.setFunc=function(a){this.func||(this.func=a)},f.prototype.getOrder=function(){return this.order||0==this.order?this.order:this.parentBean?this.parentBean.order:void 0},f.prototype.setOrder=function(a){e.isNotNull(a)&&(this.order=a)},f.prototype.isSingleton=function(){return this.scope===c.SCOPE_SINGLETON},f.prototype.isPrototype=function(){return this.scope===c.SCOPE_PROTOTYPE},f.prototype.hasFactoryBean=function(){return e.isNotNull(this.factoryBeanName)&&e.isNotNull(this.factoryMethodName)},f.prototype.hasInitMethod=function(){return e.isNotNull(this.initMethodName)},f.prototype.hasParent=function(){return e.isNotNull(this.parentName)},f.prototype.updateSettingsOn=function(a,b,c){var e=a[b],f=d.getBeanSettingsMap(e),g=d.getBeanSettingsMap(c);for(var h in g)f[h]||(f[h]=g[h]);a[b]=d.getBeanSettingsArray(f)}},{"../../util/beanUtil":27,"../../util/constant":28,"../../util/utils":34}],14:[function(a,b){var c=a("pomelo-logger").getLogger("bearcat","BeanDefinitionVisitor"),d=a("../../util/constant"),e=a("../../util/utils"),f=function(a){this.valueResolver=a};b.exports=f,f.prototype.setValueResolver=function(a){this.valueResolver=a},f.prototype.getValueResolver=function(){return this.valueResolver},f.prototype.resolveStringValue=function(a){if(!this.valueResolver)return void c.error("No StringValueResolver specified");var b=this.getValueResolver().resolveStringValue(a);return b},f.prototype.visitBeanDefinition=function(a){this.visitParentName(a),this.visitPropertyValues(a),this.visitArgumentsValues(a)},f.prototype.visitParentName=function(a){var b=a.getParentName();if(e.isNotNull(b)){var c=this.resolveStringValue(b);b!==c&&e.isNotNull(c)&&a.setParentName(c)}},f.prototype.visitPropertyValues=function(a){for(var b=a.getProps(),c=0;c<b.length;c++){var f=b[c];if(f.getDependType()===d.DEPEND_TYPE_VALUE){var g=f.getValue(),h=this.resolveStringValue(g);g!==h&&e.isNotNull(h)&&f.setValue(h)}}},f.prototype.visitArgumentsValues=function(a){for(var b=a.getArgs(),c=0;c<b.length;c++){var f=b[c];if(f.getDependType()===d.DEPEND_TYPE_VALUE){var g=f.getValue(),h=this.resolveStringValue(g);g!==h&&e.isNotNull(h)&&f.setValue(h)}}}},{"../../util/constant":28,"../../util/utils":34,"pomelo-logger":46}],15:[function(a,b){var c,d=a("../../util/requestUtil"),e=(a("../../util/utils"),{}),f={},g={},h={INIT:0,FETCHING:1,SAVED:2,LOADING:3,LOADED:4,ERROR:5},i=function(a,b,c){this.uri=a,this.dependencies=b||[],this.deps={},this.remain=0,this.entries=[],this.history={},this.loader=c,this.callback=null,this.status=h.INIT};i.prototype.resolve=function(){for(var a=this,b=a.dependencies,c=[],d=this.getLoader(),e=b.length,f=0;e>f;f++)c[f]=d.resolve(b[f],a.uri);return c},i.prototype.pass=function(){for(var a=this,b=a.dependencies.length,c=0;c<a.entries.length;c++){for(var d=a.entries[c],e=0,f=0;b>f;f++){var g=a.deps[a.dependencies[f]];g.status<h.LOADED&&!d.history.hasOwnProperty(g.uri)&&(d.history[g.uri]=!0,e++,g.entries.push(d),g.status===h.LOADING&&g.pass())}e>0&&(d.remain+=e-1,a.entries.shift(),c--)}},i.prototype.load=function(){var a=this;if(!(this.status>=h.LOADING)){var b=this.getLoader();a.status=h.LOADING;for(var c=a.resolve(),d=0,e=c.length;e>d;d++)a.deps[a.dependencies[d]]=b.get(c[d]);if(a.pass(),a.entries.length)return void a.onload();var f,g={};for(d=0;e>d;d++)f=b.get(c[d]),f.status<h.FETCHING?f.fetch(g):f.status===h.SAVED&&f.load();for(var i in g)g.hasOwnProperty(i)&&g[i]()}},i.prototype.onload=function(){var a=this;a.status=h.LOADED;for(var b=(a.entries||[]).length,c=0;b>c;c++){var d=a.entries[c];0===--d.remain&&d.callback()}delete a.entries},i.prototype.error=function(){var a=this;a.onload(),a.status=h.ERROR},i.prototype.fetch=function(a){function b(){d.request(m.requestUri,m.onRequest,m.charset,m.crossorigin)}function i(a){delete e[n],f[n]=!0,c&&(l.save(k,c),c=null);var b,d=g[n];for(delete g[n];b=d.shift();)a===!0?b.error():b.load()}var j=this,k=j.uri;console.log("do fetch "+k);var l=this.getLoader();j.status=h.FETCHING;var m={uri:k},n=m.requestUri||k;return!n||f.hasOwnProperty(n)?void j.load():e.hasOwnProperty(n)?void g[n].push(j):(e[n]=!0,g[n]=[j],m={uri:k,requestUri:n,onRequest:i,charset:"utf-8",crossorigin:!1},void(m.requested||(a?a[m.requestUri]=b:b())))},i.prototype.addEntry=function(a){this.entries.push(a)},i.prototype.setRemain=function(a){this.remain=a},i.prototype.setLoader=function(a){this.loader=a},i.prototype.getLoader=function(){return this.loader},i.STATUS=h,i.anonymousMeta=c,b.exports=i},{"../../util/requestUtil":31,"../../util/utils":34}],16:[function(a,b){var c=(a("pomelo-logger").getLogger("bearcat","BeanWrapper"),a("../../util/constant")),d=a("../../util/utils"),e=function(){this.name=null,this.type=null,this.value=null,this.ref=null,this.role=null,this.bean=null};b.exports=e,e.prototype.getDependType=function(){return this.role},e.prototype.getName=function(){return this.name},e.prototype.setName=function(a){this.name=a},e.prototype.getType=function(){return this.type},e.prototype.setType=function(a){this.type=a},e.prototype.getValue=function(){return this.value},e.prototype.setValue=function(a){this.value=a},e.prototype.getValueOnce=function(){var a=this.value;return this.value=null,a},e.prototype.getRef=function(){return this.ref},e.prototype.setRef=function(a){this.ref=a},e.prototype.getRole=function(){return this.role},e.prototype.setRole=function(){var a=c.DEPEND_TYPE_ERROR;this.name||(a=c.DEPEND_TYPE_ERROR),this.ref&&(a=c.DEPEND_TYPE_BEAN),this.value&&(a=c.DEPEND_TYPE_VALUE),this.type&&d.checkType(this.type)&&(a=c.DEPEND_TYPE_VAR),this.role=a},e.prototype.getBean=function(){return this.bean},e.prototype.setBean=function(a){this.bean=a}},{"../../util/constant":28,"../../util/utils":34,"pomelo-logger":46}],17:[function(a,b){(function(c){var d,e=a("../../resource/propertiesLoader"),f=a("./beanDefinitionVisitor"),g=a("./placeHolderResolver"),h=a("../../util/constant"),i=a("../../util/utils"),j=c.cwd()+"/config";!function(){d=this}();var k=function(){this.beanName=null,this.env=h.DEFAULT_ENV,this.cpath=j,this.properties={}};b.exports=k,k.prototype.postProcessBeanFactory=function(a){this.loadProperties(),this.processProperties(a)},k.prototype.loadProperties=function(){var a=null;a=d.__bearcatData__&&d.__bearcatData__.configData?d.__bearcatData__.configData:this.getPropertiesLoader().loadProperties(this.getConfigPath(),this.getEnv()),this.mergeProperties(a)},k.prototype.mergeProperties=function(a){for(var b in a)i.isNotNull(a[b])&&(this.properties[b]=a[b])},k.prototype.processProperties=function(a){var b=this.getProperties();if(!i.checkObjectEmpty(b)){var c=new g(b);this.doProcessProperties(a,c)}},k.prototype.doProcessProperties=function(a,b){var c=new f(b),d=a.getBeanDefinitions();for(var e in d){var g=d[e];c.visitBeanDefinition(g)}},k.prototype.getPropertiesLoader=function(){return new e},k.prototype.setBeanName=function(a){this.beanName=a},k.prototype.getBeanName=function(){return this.beanName},k.prototype.setEnv=function(a){this.env=a},k.prototype.getEnv=function(){return this.env},k.prototype.setConfigPath=function(a){this.cpath=a},k.prototype.getConfigPath=function(){return this.cpath},k.prototype.setProperties=function(a){this.properties=a},k.prototype.getProperties=function(){return this.properties}}).call(this,a("_process"))},{"../../resource/propertiesLoader":24,"../../util/constant":28,"../../util/utils":34,"./beanDefinitionVisitor":14,"./placeHolderResolver":18,_process:41}],18:[function(a,b){var c=a("../../util/utils"),d="${",e="}",f=":",g=function(a){this.placeholderPrefix=d,this.placeholderSuffix=e,this.valueSeparator=f,this.properties=a};b.exports=g,g.prototype.resolveStringValue=function(a){if(!c.checkString(a))return null;var b=this.doReplace(a);return c.isNotNull(b)||(b=a),b},g.prototype.setProperties=function(a){this.properties=a},g.prototype.getProperties=function(){return this.properties},g.prototype.doReplace=function(a){if(!a)return null;var b=this.getProperties();if(!b)return null;for(var c,d,e,f=/\$\{(.*?)\}/g,g="",h=0,i=!0,j=0;c=f.exec(a);)d=c[1],e=a.substring(h,c.index),e.length&&(g+=e),h=f.lastIndex,0!=j||e.length?g+=b[d]:g=b[d],i=!1;
return h<a.length&&(g+=a.substring(h)),i?null:g}},{"../../util/utils":34}],19:[function(a,b){var c,d=a("pomelo-logger").getLogger("bearcat","app"),e=a("./context/applicationContext"),f=(a("./beans/beanFactory"),a("../package.json")),g=a("./util/utils");!function(){c=this}();var h=1,i=2,j=3,k=4,l={opts:null,configLocations:null,applicationContext:null,state:h,startTime:null,version:f.version};b.exports=l,l.createApp=function(a,b){!g.checkArray(a)&&g.checkObject(a)&&(b=a,a=[]),this.opts=b||{},this.configLocations=a||[],this.opts.BEARCAT_GLOBAL&&(c.bearcat=l);var a=this.configLocations;return a?(g.checkObject(this.opts)||d.warn("Bearcat createApp opts must be object..."),this.applicationContext=new e(a,this.opts),this.state=i,l):cb(new Error("Bearcat createApp error, configLocations null"))},l.start=function(a){if(g.checkFunction(a)||(a=function(){}),this.state>i)return d.warn("Bearcat has already start, run bearcat.stop to start again."),a();if(this.state<i)return d.warn("Bearcat does not inited, run bearcat.createApp to init."),a();this.state=j,this.startTime=Date.now();var b=this,c=this.applicationContext.getEnv();g.checkBrowser()&&(this.applicationContext.setEnv(c),c="browser"),this.applicationContext.on("finishRefresh",function(){b.state=k,d.info("Bearcat startup in %s with %s ms",c,Date.now()-b.startTime),a()}),this.applicationContext.refresh()},l.stop=function(){this.applicationContext&&this.applicationContext.destroy(),this.applicationContext=null,this.configLocations=null,this.startTime=null,this.state=h},l.getBeanFactory=function(){return this.state<=i?void d.warn("Bearcat application is not running now for %j","getBeanFactory"):this.applicationContext.getBeanFactory()},l.getApplicationContext=function(){return this.state<=i?void d.warn("Bearcat application is not running now for %j","getApplicationContext"):this.applicationContext},l.getBeanByMeta=function(a){return this.state<=i?void d.warn("Bearcat application is not running now for %j","getBeanByMeta"):this.applicationContext.getBeanByMeta(a)},l.getBeanByFunc=function(a){return this.state<=i?void d.warn("Bearcat application is not running now for %j","getBeanByFunc"):this.applicationContext.getBeanByFunc(a)},l.use=function(a){return g.checkArray(a)?this.applicationContext.use(a):g.checkString(a)?this.applicationContext.use([a]):void 0},l.async=function(a,b){return g.checkArray(a)?this.applicationContext.async(a,b):g.checkString(a)?this.applicationContext.async([a],b):void 0},l.module=function(a,b){return this.state<k?this.applicationContext.module(a,b):this.getBean(a)},l.getBean=function(a){if(this.state<=i)return void d.warn("Bearcat application is not running now for %j %j","getBean",this.state);arguments=Array.prototype.slice.apply(arguments);var b=arguments[0],c="";if("object"==typeof b)c="getBeanByMeta";else if("function"==typeof b)c="getBeanByFunc";else{if("string"!=typeof b)return void d.error("Bearcat application unsupported getBean arguments for %s",a);c="getBean"}return this.applicationContext[c].apply(this.applicationContext,arguments)},l.getFunction=function(a){return this.state<=i?void d.warn("Bearcat application is not running now for %j %j","getFunction",this.state):l.getBeanFactory().getBeanFunction(a)},l.getRoute=function(a,b){var c=l.getBean(a);return c[b].bind(c)}},{"../package.json":44,"./beans/beanFactory":11,"./context/applicationContext":20,"./util/utils":34,"pomelo-logger":46}],20:[function(a,b){(function(c){var d,e=a("pomelo-logger").getLogger("bearcat","ApplicationContext"),f=a("../beans/support/placeHolderConfigurer"),g=a("../aop/autoproxy/autoProxyCreator"),h=a("../resource/asyncScriptLoader"),i=a("../resource/resourceLoader"),j=a("../beans/beanFactory"),k=a("events").EventEmitter,l=a("../util/requireUtil"),m=a("../util/constant"),n=a("../util/fileUtil"),o=a("../util/metaUtil"),p=a("../util/utils"),q=l.requirePath(),r=l.requireUtil(),s=c.cwd(),t=s+"/config",u=s+"/hot";!function(){d=this}();var v=function(a,b){this.opts=b||{},this.configLocations=a,this.loadBeans=[],this.active=!1,this.reloadMap={},this.beanFactory=null,this.startUpDate=null,this.resourceLoader=null,this.asyncScriptLoader=null,this.cpath=t,this.hpath=u,this.env=m.DEFAULT_ENV,this.base=s,this.beanFactoryPostProcessors=[],k.call(this),this.init()};b.exports=v,r.inherits(v,k),v.prototype.init=function(){this.hasBeanFactory()&&(this.destroyBeans(),this.closeBeanFactory()),this.createBeanFactory()},v.prototype.setStartupDate=function(a){this.startUpDate=a},v.prototype.getStartupDate=function(){return this.startUpDate},v.prototype.getResourceLoader=function(){return this.resourceLoader=new i,this.resourceLoader},v.prototype.getAsyncScriptLoader=function(){return this.asyncScriptLoader?this.asyncScriptLoader:(this.asyncScriptLoader=new h,this.asyncScriptLoader.setApplicationContext(this),this.asyncScriptLoader)},v.prototype.getResource=function(a){return d.__bearcatData__&&d.__bearcatData__.metas?d.__bearcatData__.metas:this.resourceLoader.load(a)},v.prototype.getConfigLocations=function(){return this.configLocations},v.prototype.addBeanFactoryPostProcessor=function(a){this.beanFactoryPostProcessors.push(a)},v.prototype.getBeanFactoryProcessors=function(){return this.beanFactoryPostProcessors},v.prototype.refresh=function(a){var b=this;a=a||function(){},b.prepareRefresh(),b.refreshBeanFactory(),b.tryAsyncLoading(function(){b.prepareBeanFactory(),b.postProcessBeanFactory(),b.invokeBeanFactoryPostProcessors(),b.registerBeanPostProcessors(),b.finishBeanFactoryIntialization(function(){b.finishRefresh(),a()})})},v.prototype.prepareRefresh=function(){this.startUpDate=Date.now(),this.active=!0;var b=this.opts;b.NODE_ENV&&(c.env.NODE_ENV=b.NODE_ENV),b.BEARCAT_ENV&&(c.env.BEARCAT_ENV=b.BEARCAT_ENV),b.NODE_CPATH&&(c.env.NODE_CPATH=b.NODE_CPATH),b.BEARCAT_CPATH&&(c.env.BEARCAT_CPATH=b.BEARCAT_CPATH),b.BEARCAT_LOGGER&&"off"===b.BEARCAT_LOGGER&&(c.env.BEARCAT_LOGGER="off"),b.BEARCAT_HOT&&"off"===b.BEARCAT_HOT&&(c.env.BEARCAT_HOT="off"),b.BEARCAT_ANNOTATION&&"off"===b.BEARCAT_ANNOTATION&&(c.env.BEARCAT_ANNOTATION="off"),this.getResourceLoader(),this.beanFactoryPostProcessors=[];var d=p.parseArgs(c.argv),f=this.getEnv();f=d.env||d["--env"]||c.env.NODE_ENV||c.env.BEARCAT_ENV||f||m.DEFAULT_ENV,this.setEnv(f);var g=this.getConfigPath();if(g=d.cpath||d["--cpath"]||c.env.NODE_CPATH||c.env.BEARCAT_CPATH||g,this.setConfigPath(g),!p.checkBrowser()){var h=this.getBase();if("off"!==c.env.BEARCAT_LOGGER){var i=q.join(g,m.LOGPATH),j=q.join(g,f,m.LOGPATH);n.existsSync(i)?a("pomelo-logger").configure(i,{base:h}):n.existsSync(j)?a("pomelo-logger").configure(j,{base:h}):e.error("logger file path configuration is error.")}var k=this.getHotPath();k=d.hpath||d["--hpath"]||k,this.setHotPath(k),"off"!==c.env.BEARCAT_HOT&&n.existsSync(k)&&this.hotReloadFileWatch(k)}},v.prototype.refreshBeanFactory=function(){this.configLocations=this.getConfigLocations();for(var a=this.configLocations.length,b=0;a>b;b++)this.beanFactory.registryBeans(this.getResource(this.configLocations[b]));a||this.beanFactory.registryBeans(this.getResource())},v.prototype.tryAsyncLoading=function(a){if(!p.checkBrowser())return a();var b=this.loadBeans;return b&&b.length?this.doAsyncLoading(a):a()},v.prototype.doAsyncLoading=function(a){var b=this.loadBeans,c=this.getAsyncScriptLoader();return c.load(b,a)},v.prototype.prepareBeanFactory=function(){var a=new f;p.isNotNull(this.env)&&a.setEnv(this.env),p.isNotNull(this.cpath)&&a.setConfigPath(this.cpath),this.addBeanFactoryPostProcessor(a)},v.prototype.registerBeanMeta=function(a){var b=a.id;if(!b)return void e.error("ApplicationContext registerBean error meta no id.");var c={};c[b]=a,this.beanFactory.registryBeans(c)},v.prototype.hotReloadFileWatch=function(a){var b=this;e.info("Bearcat hot reload watch %j",a),n.watch(a,function(c,d){if(p.checkString(d)&&!b.reloadMap[d]){var f=q.join(a,d),g=p.getFileName(f,".js".length);if(p.checkFileType(f,".js")&&p.isFile(f)){b.reloadMap[d]=!0,e.info("%j changed, Bearcat start hot reloading...",f);var h=Math.floor(5*Math.random(0,1)),i=Math.floor(100*Math.random(0,1));setTimeout(function(){var a=p.myRequireHot(f);if(p.checkFunction(a)&&(a=o.resolveFuncAnnotation(a)),p.checkObject(a)){g=a.id;var c=a.func;if(g&&p.checkFunction(c)){var h=b.getBeanFactory().getBeanFunction(g);if(h){var i=c.prototype;for(var j in i)e.info("Bearcat reload %j:%j",d,j),h.prototype[j]=i[j]}}}e.info("Bearcat hot reloading done..."),setTimeout(function(){b.reloadMap[d]=!1},1e3)},1e3*h+i+h)}}})},v.prototype.postProcessBeanFactory=function(){},v.prototype.registerBeanPostProcessors=function(){var a=new g;a.setBeanFactory(this.getBeanFactory()),this.beanFactory.addBeanPostProcessor(a)},v.prototype.invokeBeanFactoryPostProcessors=function(){for(var a=this.getBeanFactory(),b=this.getBeanFactoryProcessors(),c=0;c<b.length;c++){var d=b[c];d.postProcessBeanFactory(a)}},v.prototype.finishBeanFactoryIntialization=function(a){this.beanFactory.preInstantiateSingletons(a)},v.prototype.finishRefresh=function(){var a=this;if(this.emit("finishRefresh"),!c.browser){var b=c.listeners("SIGINT");b&&b.length||c.on("SIGINT",function(){e.info("Bearcat starts destroying..."),a.destroy(),c.exit()})}},v.prototype.cancelRefresh=function(){this.active=!1},v.prototype.registerShutdownHook=function(){},v.prototype.destroy=function(){this.close()},v.prototype.close=function(){this.doClose()},v.prototype.doClose=function(){this.configLocations=null,this.startUpDate=null,this.active=!1,this.hasBeanFactory()&&(this.destroyBeans(),this.closeBeanFactory()),this.beanFactory=null,this.resourceLoader=null,this.beanFactoryPostProcessors=[],this.cpath=t,this.env=m.DEFAULT_ENV,this.emit("destroyed")},v.prototype.destroyBeans=function(){this.getBeanFactory().destroySingletons()},v.prototype.isActive=function(){return this.active},v.prototype.getBean=function(){arguments=Array.prototype.slice.apply(arguments);var a=this.getBeanFactory();return a.getBean.apply(a,arguments)},v.prototype.getBeanByMeta=function(a){var b=a.id;return b?(this.registerBeanMeta(a),arguments=Array.prototype.slice.apply(arguments),arguments[0]=b,this.beanFactory.getBeanProxy.apply(this.beanFactory,arguments)):void e.error("ApplicationContext getBeanByMeta error meta no id.")},v.prototype.getBeanByFunc=function(a){var b=o.resolveFuncAnnotation(a),c=b.id;return c?(this.registerBeanMeta(b),this.invokeBeanFactoryPostProcessors(),arguments=Array.prototype.slice.apply(arguments),arguments[0]=c,this.beanFactory.getBeanProxy.apply(this.beanFactory,arguments)):void e.error('ApplicationContext getBeanByFunc error meta no id, add this.$id = "yourId" to your func.')},v.prototype.module=function(a,b){var c=o.resolveFuncAnnotation(a),d=c.id;if(!d)return void e.error('ApplicationContext module error meta no id, add this.$id = "yourId" to your func.');if(!this.getBeanDefinition(d)){if(!p.checkBrowser()&&p.isNotNull(b)&&b.exports)return b.exports=a;var f=this.getAsyncScriptLoader();return f.module(d,c),this.registerBeanMeta(c)}},v.prototype.use=function(a){this.loadBeans=this.loadBeans.concat(a)},v.prototype.async=function(a,b){var c=new h;return c.load(loadBeans,b)},v.prototype.containsBean=function(a){return this.getBeanFactory().containsBean(a)},v.prototype.isSingleton=function(a){return this.getBeanFactory().isSingleton(a)},v.prototype.isPrototype=function(a){return this.getBeanFactory().isPrototype(a)},v.prototype.containsBeanDefinition=function(a){return this.getBeanFactory().containsBeanDefinition(a)},v.prototype.isRunning=function(){return this.active},v.prototype.closeBeanFactory=function(){this.getBeanFactory().destroyBeanFactory(),this.beanFactory=null},v.prototype.hasBeanFactory=function(){return null!=this.beanFactory},v.prototype.getBeanFactory=function(){return this.beanFactory},v.prototype.createBeanFactory=function(){this.beanFactory=new j},v.prototype.getBeanDefinition=function(a){return this.getBeanFactory().getBeanDefinition(a)},v.prototype.removeBeanDefinition=function(a){return this.getBeanFactory().removeBeanDefinition(a)},v.prototype.setEnv=function(a){this.env=a},v.prototype.getEnv=function(){return this.env},v.prototype.setConfigPath=function(a){this.cpath=a},v.prototype.getConfigPath=function(){return this.cpath},v.prototype.setHotPath=function(a){this.hpath=a},v.prototype.getHotPath=function(){return this.hpath},v.prototype.getBase=function(){return this.base}}).call(this,a("_process"))},{"../aop/autoproxy/autoProxyCreator":4,"../beans/beanFactory":11,"../beans/support/placeHolderConfigurer":17,"../resource/asyncScriptLoader":21,"../resource/resourceLoader":25,"../util/constant":28,"../util/fileUtil":29,"../util/metaUtil":30,"../util/requireUtil":32,"../util/utils":34,_process:41,events:37,"pomelo-logger":46}],21:[function(a,b){var c,d=a("../beans/support/beanModule"),e=(a("../util/requireUtil").requirePath(),a("../util/scriptUtil")),f=a("../util/utils"),g=1;!function(){c=this}();var h=function(){this.cacheModules={},this.loaderDir=null,this.applicationContext=null};h.prototype.getLoadBeans=function(){return this.loadBeans},h.prototype.load=function(a,b){this.loaderDir=e.getLoaderDir();var c=this.loaderDir+"_load_"+g++,d=this.get(c,a);d.addEntry(d),d.setRemain(1),d.callback=function(){f.checkFunction(b)&&b(),delete d.callback,delete d.history,delete d.remain,delete d.entries},d.load()},h.prototype.save=function(a,b){var c=this.get(a);c.status<d.STATUS.SAVED&&(c.id=b.id||a,c.dependencies=b.deps||[],c.factory=b.factory,c.status=d.STATUS.SAVED)},h.prototype.module=function(a,b){var c=this.resolveDeps(b),e={id:a,uri:this.resolve(a),deps:c};e.uri?this.save(e.uri,e):d.anonymousMeta=e},h.prototype.resolve=function(a){var b=this.getPathById(a);if(!b)throw new Error("id: "+a+" can not be resolved");return b},h.prototype.resolveDeps=function(a){var b=a.props;if(f.isNotNull(b)&&b){for(var c=[],d=0;d<b.length;d++){var e=b[d],g=e.ref;if(g){if(this.applicationContext.getBeanDefinition(g))continue;c.push(g)}}return c}},h.prototype.getPathById=function(a){return c.__bearcatData__&&c.__bearcatData__.idPaths?c.__bearcatData__.idPaths[a]:void 0},h.prototype.get=function(a,b){return this.cacheModules[a]||(this.cacheModules[a]=new d(a,b,this))},h.prototype.setApplicationContext=function(a){this.applicationContext=a},b.exports=h},{"../beans/support/beanModule":15,"../util/requireUtil":32,"../util/scriptUtil":33,"../util/utils":34}],22:[function(a,b){(function(c){var d=a("pomelo-logger").getLogger("bearcat","ConfigLoader"),e=a("../util/requireUtil"),f=a("../util/metaUtil"),g=a("../util/constant"),h=a("./metaLoader"),i=a("../util/utils"),j=e.requirePath(),k=function(){};b.exports=k,k.prototype.getMetaLoader=function(){return new h},k.prototype.getResources=function(a){var b=[],c={},d=this.getMetaLoader();this.getRecursiveScanPath(a,b,c);for(var e in c)d.setMetaObject(e,c[e]);for(var f=0;f<b.length;f++)d.load(b[f]);return d.getMetaObejcts()},k.prototype.getRecursiveScanPath=function(a,b,e){var h=i.myRequire(a);if(h){var k=h.scan,l=h.beans,m=h.browser,n=h.imports,o=h.namespace,p=h.dependencies,q=j.dirname(a);if(i.checkString(m))return void this.getRecursiveScanPath(q+"/"+m,b,e);if(i.checkArray(m))for(var r=0;r<m.length;r++)this.getRecursiveScanPath(q+"/"+m[r],b,e);else{for(var s in p)this.getRecursiveScanPath(q+"/node_modules/"+s+"/context.json",b,e);if(i.checkArray(n))for(var t=0;t<n.length;t++)this.getRecursiveScanPath(q+"/"+n[t],b,e);if(l)for(var r=0;r<l.length;r++){var u=l[r],v=u.id;o&&(v=o+g.NAMESPACE_SEPERATOR+v);var w=null,x="";if(i.checkString(u.func)&&(x=i.getLoadPath(u.func,a),w=i.myRequire(x)),w)if(i.checkFunction(w))u.func=w;else if(i.checkObject(w)){if(!w.id||w.id!==v){d.error("meta defined in file %j %j mismatch with that defined in context %j",x,w,u);continue}u=f.mergeMeta(w,u),u.ftype="object"}if(v){var y=e[v];e[v]=f.mergeMeta(u,y),x&&(u.fpath=j.resolve(c.cwd(),x))}}if(i.checkString(k)){var z=i.getLoadPath2(k,a);b.push(z)}if(i.checkArray(k))for(var r=0;r<k.length;r++){var z=i.getLoadPath2(k[r],a);b.push(z)}}}}}).call(this,a("_process"))},{"../util/constant":28,"../util/metaUtil":30,"../util/requireUtil":32,"../util/utils":34,"./metaLoader":23,_process:41,"pomelo-logger":46}],23:[function(a,b){(function(c){var d=a("pomelo-logger").getLogger("bearcat","MetaLoader"),e=a("../util/fileUtil"),f=a("../util/metaUtil"),g=a("../util/utils"),h=(a("path"),function(){this.metaObjects={}});b.exports=h,h.prototype.load=function(a){return a?(a=e.realpathSync(a),g.isDir(a)?(this.loadPath(this.metaObjects,a),this.metaObjects):void d.error("path should be directory.")):void d.error("load path should not be empty.")},h.prototype.setMetaObject=function(a,b){var c=this.metaObjects[a];this.metaObjects[a]=f.mergeMeta(b,c)},h.prototype.getMetaObejcts=function(){return this.metaObjects},h.prototype.loadFile=function(a){var b=g.myRequire(a);if("off"!==c.env.BEARCAT_ANNOTATION&&g.checkFunction(b))return f.resolveFuncAnnotation(b,a);if(g.checkObject(b)&&b&&b.id&&b.func)return a&&(b.ftype="object",b.fpath=a),b},h.prototype.loadPath=function(a,b){var c=e.readdirSync(b);"/"!==b.charAt(b.length-1)&&(b+="/");for(var d,h,i,j=0,k=c.length;k>j;j++)if(h=c[j],d=b+h,g.isDir(d)&&this.loadPath(a,d),g.isFile(d)&&g.checkFileType(h,".js")&&(i=this.loadFile(d))){var l=g.getFileName(h,".js".length);if(i.id){l=i.id;var m=a[l];a[l]=f.mergeMeta(i,m)}}return a}}).call(this,a("_process"))},{"../util/fileUtil":29,"../util/metaUtil":30,"../util/utils":34,_process:41,path:40,"pomelo-logger":46}],24:[function(a,b){var c=(a("pomelo-logger").getLogger("bearcat","PropertiesLoader"),a("../util/fileUtil")),d=a("../util/utils"),e=function(){};b.exports=e,e.prototype.loadProperties=function(a,b){var c={};return this.loadDir(c,a),this.loadDir(c,a+"/"+b),c},e.prototype.loadDir=function(a,b){if(c.existsSync(b)&&d.isDir(b)){var e=c.readdirSync(b);"/"!==b.charAt(b.length-1)&&(b+="/");for(var f,g,h,i=0,j=e.length;j>i;i++)if(g=e[i],f=b+g,!d.isDir(f)&&d.isFile(f)&&d.checkFileType(f,"json")&&(h=d.myRequire(f),h&&"object"==typeof h))for(var k in h)d.isNotNull(h[k])&&(a[k]=h[k])}}},{"../util/fileUtil":29,"../util/utils":34,"pomelo-logger":46}],25:[function(a,b){var c=a("./configLoader"),d=function(){this.loadPathMap={},this.loadPaths=[]};b.exports=d,d.prototype.getConfigLoader=function(){var a=new c;return a},d.prototype.addLoadPath=function(a){this.loadPaths.push(a)},d.prototype.load=function(a){if(this.loadPathMap[a])return this.loadPathMap[a];var b=this.getConfigLoader().getResources(a);return this.loadPathMap[a]=b,this.addLoadPath(a),b}},{"./configLoader":22}],26:[function(a,b){var c=a("../aop/advisor"),d=a("../aop/aspect"),e=a("./utils"),f={};b.exports=f,f.buildAspect=function(a,b){var e=new d,f=b.getBeanName();e.setBeanDefinition(b),e.setBeanName(f);for(var g=0;g<a.length;g++){var h=a[g],i=h.pointcut,j=h.advice,k=h.order,l=h.runtime||!1;if(i&&j){var m=new c;m.setPointcut(i),m.setAdvice(j),m.setBeanName(f),m.setOrder(k),m.setRuntime(l),m.parse(),e.addAdvisor(m)}}return e},f.getMethodsFromObject=function(a){var b=a,c=[];for(var d in b){var e=b[d];"function"==typeof e&&c.push(d)}return c},f.sortAdvisorsByOrder=function(a){return a.sort(e.compareByOrder),a}},{"../aop/advisor":2,"../aop/aspect":3,"./utils":34}],27:[function(a,b){var c=a("../beans/support/beanWrapper"),d=a("./utils"),e={};b.exports=e,e.buildBeanWrapper=function(a){var b=[];if(!d.checkArray(a))return b;for(var e=0;e<a.length;e++){var f=a[e],g=new c;f.name&&g.setName(f.name),f.type&&g.setType(f.type),f.value&&g.setValue(f.value),f.ref&&g.setRef(f.ref),g.setRole(),b.push(g)}return b},e.getBeanSettingsMap=function(a){var b={};if(!d.checkArray(a))return b;for(var c=0;c<a.length;c++){var e=a[c],f=e.getName();f&&(b[f]=e)}return b},e.getBeanSettingsArray=function(a){var b=[];if(!d.isNotNull(a))return b;for(var c in a)b.push(a[c]);return b},e.sortBeanDefinitions=function(a,b){var c=[];for(var e in a){var f=a[e];!f.isSingleton()||f.isLazyInit()||f.isAbstract()||(f.hasParentBean()&&(f=b.setParentBean(f.getBeanName())),c.push(f))}return c.sort(d.compareBeans),c}},{"../beans/support/beanWrapper":16,"./utils":34}],28:[function(a,b){b.exports={SCOPE_DEFAULT:"singleton",SCOPE_SINGLETON:"singleton",SCOPE_PROTOTYPE:"prototype",DEPENDS_ARGS:"args",DEPENDS_PROPS:"props",SETTINGS_ARGS_ON:"argsOn",SETTINGS_PROPS_ON:"propsOn",SETTINGS_FACTORY_ARGS_ON:"factoryArgsOn",DEPEND_TYPE_BEAN:"d_bean",DEPEND_TYPE_VALUE:"d_value",DEPEND_TYPE_VAR:"d_var",DEPEND_TYPE_ERROR:"d_error",PROPS_DEFAULT:[],ARGS_DEFAULT:[],ASYNC_INIT_DEFAULT:!1,LAZY_INIT_DEFAULT:!1,ABSTRACT_DEFAULT:!1,INIT_CB_DEFAULT:function(){},AOP_ADVICE_BEFORE:"before",AOP_ADVICE_AFTER:"after",AOP_ADVICE_AROUND:"around",PROXY_DEFAULT:!0,DEFAULT_ENV:"dev",LOGPATH:"log4js.json",NAMESPACE_SEPERATOR:":",FUNC_ARGS_REGEXP:/function.*?\((.*?)\)\s*\{/,FUNC_PROPS_REGEXP:/\s*this\.\$\w+\s*=(.|\s)*?;/g,FUNC_COMMENT_LINE:/\/\/.*?\n/g,FUNC_COMMENT_STAR:/\/\*(.|\s)*?\*\//g,FUNC_ANNOTATION:"$",PROTO_FUNC_PROPS_REGEXP:/\w+\s*\$\w+\s*=(.|\s)*?;/g,META_PROPS:["id","order","init","destroy","factoryBean","factoryMethod","scope","async","abstract","parent","lazy","factoryArgs","proxy","aop"],AOP_META_PROPS:["pointcut","advice","order","runtime"],META_AOP:"aop",META_AOP_ADVICE:"advice"}},{}],29:[function(a,b){var c=a("fs"),d={};if(b.exports=d,d.existsSync=function(){return!1},d.watch=function(a,b){b()},d.realpathSync=function(){},d.readdirSync=function(){},c)for(var e in c)d[e]=c[e]},{fs:36}],30:[function(require,module,exports){(function(process){var logger=require("pomelo-logger").getLogger("Bearcat","MetaUtil"),RequireUtil=require("./requireUtil"),Constant=require("./constant"),Os=RequireUtil.requireOs(),Utils=require("./utils"),EOL=Os.EOL,MetaUtil={};module.exports=MetaUtil,MetaUtil.mergeMeta=function(a,b){if(!b)return a;for(var c in a)b[c]=a[c];return b},MetaUtil.resolveFuncAnnotation=function(a,b){var c=a.toString();c=MetaUtil.resolveFuncComment(c);var d=c.match(Constant.FUNC_ARGS_REGEXP);d=d?d[1]:"";var e=d.split(","),f=c.match(Constant.FUNC_PROPS_REGEXP),g={},h=[],i=[];if(f&&Utils.checkArray(f)){for(var j="var FuncProps = function("+d+") {"+EOL,k=0;k<f.length;k++)j+=f[k]+EOL;j+="}";var l=MetaUtil.getEvalFuncProps(j);for(var m in l)if(MetaUtil.checkFuncAnnotation(m)){var n=m.substr(1),o=l[m];MetaUtil.checkInMetaProps(m)?g[n]=n===Constant.META_AOP&&l[m]===!0?this.resolvePrototypeAnnotation(a):l[m]:MetaUtil.checkInFuncArgs(m,e)||h.push(MetaUtil.checkFuncPropsValue(m)?{name:m,value:o}:MetaUtil.checkFuncPropsType(m)?{name:m,type:o}:MetaUtil.checkFuncPropsNamespace(m)?{name:m,ref:o}:{name:m,ref:n})}h.length&&(g.props=h)}for(var k=0;k<e.length;k++){var p=e[k].trim();if(p){var n=p.substr(1);i.push(MetaUtil.checkFuncAnnotation(p)?{name:p,ref:n}:{name:p,type:"Object"})}}return i.length&&(g.args=i),g.func=a,b&&(g.fpath=require("path").resolve(process.cwd(),b)),g},MetaUtil.resolvePrototypeAnnotation=function(a){var b=a.prototype,c=[];for(var d in b){var e=b[d];if(Utils.checkFunction(e)){var f=e.toString();f=MetaUtil.resolveFuncComment(f);var g=f.match(Constant.PROTO_FUNC_PROPS_REGEXP),h="";if(g&&Utils.checkArray(g)){h="var FuncMetaProps = function() {"+EOL;for(var i=0;i<g.length;i++)h+=g[i].replace(/var\s*/,"this.")+EOL;h+="}"}var j=MetaUtil.getEvalFuncMetaProps(h),k={},l=!1;k[Constant.META_AOP_ADVICE]=d;for(var m in j)if(this.checkInAOPMetaProps(m)){var n=m.substr(1),o=j[m];k[n]=o,l=!0}l&&c.push(k)}}return c},MetaUtil.resolveFuncComment=function(a){return a=a.replace(Constant.FUNC_COMMENT_LINE,""),a=a.replace(Constant.FUNC_COMMENT_STAR,"")},MetaUtil.getEvalFuncProps=function(t){if(!t)return{};try{return eval(t),new FuncProps}catch(err){return logger.error("resolveFuncAnnotation error: "+err.stack),{}}},MetaUtil.getEvalFuncMetaProps=function(t){if(!t)return{};try{return eval(t),new FuncMetaProps}catch(err){return logger.error("resolvePrototypeAnnotation error: "+err.stack),{}}},MetaUtil.checkInMetaProps=function(a){for(var b=Constant.META_PROPS,c=0;c<b.length;c++)if(Constant.FUNC_ANNOTATION+b[c]===a)return!0;return!1},MetaUtil.checkInAOPMetaProps=function(a){for(var b=Constant.AOP_META_PROPS,c=0;c<b.length;c++)if(Constant.FUNC_ANNOTATION+b[c]===a)return!0;return!1},MetaUtil.checkInFuncArgs=function(a,b){for(var c=0;c<b.length;c++)if(a===b[c])return!0;return!1},MetaUtil.checkFuncAnnotation=function(a){return a.match(/^\$/)},MetaUtil.checkFuncPropsValue=function(a){return a.match(/^\$V/)},MetaUtil.checkFuncPropsType=function(a){return a.match(/^\$T/)},MetaUtil.checkFuncPropsNamespace=function(a){return a.match(/^\$N/)}}).call(this,require("_process"))},{"./constant":28,"./requireUtil":32,"./utils":34,_process:41,path:40,"pomelo-logger":46}],31:[function(a,b){var c,d=a("./utils"),e={};e.request=function(a,b,c,e){return d.checkWebWorker()?this.requestFromWebWorker(a,b,c,e):this.requestFromAsyncScript(a,b,c,e)},e.requestFromWebWorker=function(a,b){var c;try{importScripts(a)}catch(d){c=d}b(c)},e.requestFromAsyncScript=function(a,b,e,f){var g=document,h=g.head||g.getElementsByTagName("head")[0]||g.documentElement,i=h.getElementsByTagName("base")[0],j=g.createElement("script");if(e){var k=d.checkFunction(e)?e(a):e;k&&(j.charset=k)}var l=d.checkFunction(f)?f(a):f;l!==!1&&(j.crossorigin=l),this.addOnload(h,j,b,a),j.async=!0,j.src=a,c=j,i?h.insertBefore(j,i):h.appendChild(j),c=null},e.addOnload=function(a,b,c){function d(d){b.onload=b.onerror=b.onreadystatechange=null,a.removeChild(b),b=null,c(d)}var e="onload"in b;e?(b.onload=d,b.onerror=function(){d(!0)}):b.onreadystatechange=function(){/loaded|complete/.test(b.readyState)&&d()}},b.exports=e},{"./utils":34}],32:[function(a,b){var c,d=a("../../shim/builtins"),e={};!function(){c=this}(),c.process||(c.process=d.process),e.requireOs=function(){var b=a("os");return b?b:d.os},e.requirePath=function(){var b=a("path");return b?b:d.path},e.requireUtil=function(){var b=a("util");return b?b:d.util},b.exports=e},{"../../shim/builtins":45,os:39,path:40,util:43}],33:[function(a,b){var c={},d=/[^?#]*\//;c.getLoaderDir=function(){function a(a){return a.match(d)[0]}function b(a){return a.hasAttribute?a.src:a.getAttribute("src",4)}var c,e,f="undefined"==typeof window&&"undefined"!=typeof importScripts&&isFunction(importScripts),g=/^(about|blob):/,h=!location.href||g.test(location.href)?"":a(location.href);if(f){var i;try{var j=new Error;throw j}catch(k){i=k.stack.split("\n")}i.shift();for(var l,m=/.*?((?:http|https|file)(?::\/{2}[\w]+)(?:[\/|\.]?)(?:[^\s"]*)).*?/i,n=/(.*?):\d+:\d+\)?$/;i.length>0;){var o=i.shift();if(l=m.exec(o),null!=l)break}var p;if(null!=l)var p=n.exec(l[1])[1];e=p,c=a(p||h),""===h&&(h=c)}else{var q=document,r=q.scripts,s=q.getElementById("seajsnode")||r[r.length-1];e=b(s),c=a(e||h)}return c},b.exports=c},{}],34:[function(a,b){var c=a("./requireUtil"),d=a("./fileUtil"),e=c.requirePath(),f={};b.exports=f,f.checkArray=function(a){return"[object Array]"==Object.prototype.toString.call(a)},f.checkFunction=function(a){return"function"==typeof a},f.checkObject=function(a){return"object"==typeof a},f.checkString=function(a){return"string"==typeof a},f.checkObjectEmpty=function(a){var b=!0;for(var c in a)b=!1;return b},f.checkType=function(a){return"Object"===a?!0:"Number"===a?!0:"Array"===a?!0:"Boolean"===a?!0:"Function"===a?!0:"String"===a?!0:!1},f.isNotNull=function(a){return null!==a&&"undefined"!=typeof a?!0:!1},f.myRequire=function(b){if(f.checkString(b)){var c=null;try{return c=a(b)}catch(d){return console.log(d.stack),c}}},f.myRequireHot=function(a){var b=null;try{return b=f.requireUncached(a)}catch(c){return console.log(c.stack),b}},f.getLoadPath=function(b,c){if("string"!=typeof b)return null;b=b.replace(/\./g,"/"),c=a.resolve(c);var d=e.dirname(c);return d+"/"+b},f.getLoadPath2=function(b,c){if("string"!=typeof b)return null;c=a.resolve(c);var d=e.dirname(c),f=e.resolve(d,b);return f},f.requireUncached=function(b){if(f.checkString(b)){var c=a.resolve(b);return a.cache[c]&&delete a.cache[c],a(b)}},f.checkFileType=function(a,b){if("."!==b.charAt(0)&&(b="."+b),a.length<=b.length)return!1;var c=a.substring(a.length-b.length).toLowerCase();return b=b.toLowerCase(),c===b},f.isFile=function(a){return d.existsSync(a)?d.statSync(a).isFile():void 0},f.isDir=function(a){return d.existsSync(a)?d.statSync(a).isDirectory():void 0},f.getFileName=function(a,b){var c=e.basename(a);return c.length>b?c.substring(0,c.length-b):c},f.compareByOrder=function(a,b){return a.getOrder()?b.getOrder()?a.getOrder()-b.getOrder():-1:1},f.compareBeans=function(a,b){return a.isAspect()?-1:b.isAspect()?1:a.getOrder()?b.getOrder()?a.getOrder()-b.getOrder():-1:1},f.parseArgs=function(a){var b={},c=1;b.main=a[c];for(var d=c+1;d<a.length;d++){var e=a[d],f=e.indexOf("="),g=e.slice(0,f),h=e.slice(f+1);b[g]=h}return b},f.checkBrowser=function(){return"undefined"!=typeof window},f.checkWebWorker=function(){return this.checkBrowser()&&"undefined"!=typeof importScripts&&this.checkFunction(importScripts)}},{"./fileUtil":29,"./requireUtil":32}],35:[function(a,b){var c=a("./constant"),d={};b.exports=d,d.metaValidator=function(a){var b=a.id;if(!b)return!1;var d=a.func;if(!d||"function"!=typeof d)return!1;var e=a.order;if(e&&"number"!=typeof e)return!1;var f=a.parent;if(f&&"string"!=typeof f)return!1;var g=a.init;if(g&&"string"!=typeof g)return!1;var h=a.destroy;if(h&&"string"!=typeof h)return!1;var i=a.factoryBean;if(i&&"string"!=typeof i)return!1;var j=a.factoryMethod;if(j&&"string"!=typeof j)return!1;var k=a.scope||c.SCOPE_DEFAULT;if(k&&k!==c.SCOPE_SINGLETON&&k!==c.SCOPE_PROTOTYPE)return!1;var l=(a.args||c.ARGS_DEFAULT,a.props||c.PROPS_DEFAULT,a.factoryArgs||c.ARGS_DEFAULT,a.async||c.ASYNC_INIT_DEFAULT);if(l&&"boolean"!=typeof l)return!1;var m=a.lazy||c.LAZY_INIT_DEFAULT;return m&&"boolean"!=typeof m?!1:!0}},{"./constant":28}],36:[function(){},{}],37:[function(a,b){function c(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function d(a){return"function"==typeof a}function e(a){return"number"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){return void 0===a}b.exports=c,c.EventEmitter=c,c.prototype._events=void 0,c.prototype._maxListeners=void 0,c.defaultMaxListeners=10,c.prototype.setMaxListeners=function(a){if(!e(a)||0>a||isNaN(a))throw TypeError("n must be a positive number");return this._maxListeners=a,this},c.prototype.emit=function(a){var b,c,e,h,i,j;if(this._events||(this._events={}),"error"===a&&(!this._events.error||f(this._events.error)&&!this._events.error.length)){if(b=arguments[1],b instanceof Error)throw b;throw TypeError('Uncaught, unspecified "error" event.')}if(c=this._events[a],g(c))return!1;if(d(c))switch(arguments.length){case 1:c.call(this);break;case 2:c.call(this,arguments[1]);break;case 3:c.call(this,arguments[1],arguments[2]);break;default:for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];c.apply(this,h)}else if(f(c)){for(e=arguments.length,h=new Array(e-1),i=1;e>i;i++)h[i-1]=arguments[i];for(j=c.slice(),e=j.length,i=0;e>i;i++)j[i].apply(this,h)}return!0},c.prototype.addListener=function(a,b){var e;if(!d(b))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",a,d(b.listener)?b.listener:b),this._events[a]?f(this._events[a])?this._events[a].push(b):this._events[a]=[this._events[a],b]:this._events[a]=b,f(this._events[a])&&!this._events[a].warned){var e;e=g(this._maxListeners)?c.defaultMaxListeners:this._maxListeners,e&&e>0&&this._events[a].length>e&&(this._events[a].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[a].length),"function"==typeof console.trace&&console.trace())}return this},c.prototype.on=c.prototype.addListener,c.prototype.once=function(a,b){function c(){this.removeListener(a,c),e||(e=!0,b.apply(this,arguments))}if(!d(b))throw TypeError("listener must be a function");var e=!1;return c.listener=b,this.on(a,c),this},c.prototype.removeListener=function(a,b){var c,e,g,h;if(!d(b))throw TypeError("listener must be a function");
if(!this._events||!this._events[a])return this;if(c=this._events[a],g=c.length,e=-1,c===b||d(c.listener)&&c.listener===b)delete this._events[a],this._events.removeListener&&this.emit("removeListener",a,b);else if(f(c)){for(h=g;h-->0;)if(c[h]===b||c[h].listener&&c[h].listener===b){e=h;break}if(0>e)return this;1===c.length?(c.length=0,delete this._events[a]):c.splice(e,1),this._events.removeListener&&this.emit("removeListener",a,b)}return this},c.prototype.removeAllListeners=function(a){var b,c;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[a]&&delete this._events[a],this;if(0===arguments.length){for(b in this._events)"removeListener"!==b&&this.removeAllListeners(b);return this.removeAllListeners("removeListener"),this._events={},this}if(c=this._events[a],d(c))this.removeListener(a,c);else for(;c.length;)this.removeListener(a,c[c.length-1]);return delete this._events[a],this},c.prototype.listeners=function(a){var b;return b=this._events&&this._events[a]?d(this._events[a])?[this._events[a]]:this._events[a].slice():[]},c.listenerCount=function(a,b){var c;return c=a._events&&a._events[b]?d(a._events[b])?1:a._events[b].length:0}},{}],38:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],39:[function(a,b,c){c.endianness=function(){return"LE"},c.hostname=function(){return"undefined"!=typeof location?location.hostname:""},c.loadavg=function(){return[]},c.uptime=function(){return 0},c.freemem=function(){return Number.MAX_VALUE},c.totalmem=function(){return Number.MAX_VALUE},c.cpus=function(){return[]},c.type=function(){return"Browser"},c.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},c.networkInterfaces=c.getNetworkInterfaces=function(){return{}},c.arch=function(){return"javascript"},c.platform=function(){return"browser"},c.tmpdir=c.tmpDir=function(){return"/tmp"},c.EOL="\n"},{}],40:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:41}],41:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.MutationObserver,c="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};var d=[];if(b){var e=document.createElement("div"),f=new MutationObserver(function(){var a=d.slice();d.length=0,a.forEach(function(a){a()})});return f.observe(e,{attributes:!0}),function(a){d.length||e.setAttribute("yes","no"),d.push(a)}}return c?(window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),d.length>0)){var c=d.shift();c()}},!0),function(a){d.push(a),window.postMessage("process-tick","*")}):function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],42:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],43:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":42,_process:41,inherits:38}],44:[function(a,b){b.exports={name:"bearcat",version:"0.3.0",description:"a POJOs based application framework for node.js",main:"index.js",bin:"./bin/bearcat-bin.js",scripts:{test:"grunt"},repository:{type:"git",url:"https://github.com/bearcatjs/bearcat.git"},keywords:["IoC","dependency","injection","AOP","consistent","configuration","hot reload"],dependencies:{"pomelo-logger":"0.1.x",commander:"2.x"},spm:{main:"index.js",dependencies:{"pomelo-logger":"0.1.7",fs:"0.0.0",path:"0.0.0",util:"0.10.3",os:"0.0.0",events:"1.0.1"},devDependencies:{"expect.js":"0.3.1"}},browser:{"pomelo-logger":"./shim/logger.js"},author:"fantasyni",license:"MIT",devDependencies:{"expect.js":"~0.3.1",mocha:">=0.0.1",grunt:"~0.4.2",blanket:"1.1.x","grunt-browserify":"3.x","grunt-mocha-test":"0.8.x","grunt-contrib-clean":"0.5.x","grunt-contrib-uglify":"~0.3.2"}}},{}],45:[function(a,b,c){c.process=a("./modules/process"),c.path=a("./modules/path"),c.util=a("./modules/util"),c.os=a("./modules/os"),a("./object")},{"./modules/os":47,"./modules/path":48,"./modules/process":49,"./modules/util":52,"./object":53}],46:[function(a,b){(function(a){function c(b){if("function"!=typeof console.log)return console;for(var c=arguments,d="",e=1;e<c.length;e++)e!==c.length-1?d=d+c[e]+"] [":d+=c[e];"string"==typeof b&&(b=b.replace(a.cwd(),""));var f=console,g={};for(var h in f)g[h]=f[h];for(var i=["log","debug","info","warn","error","trace"],e=0;e<i.length;e++)!function(b){g[b]=function(){var e="";a.env.RAW_MESSAGE||(c.length>1&&(e="["+d+"] "),c.length&&a.env.LOGGER_LINE&&(e=getLine()+": "+e)),c.length&&(arguments[0]=e+arguments[0]),f[b].apply(f,arguments)}}(i[e]);return g}b.exports={getLogger:c}}).call(this,a("_process"))},{_process:41}],47:[function(a,b,c){c.endianness=function(){return"LE"},c.hostname=function(){return"undefined"!=typeof location?location.hostname:""},c.loadavg=function(){return[]},c.uptime=function(){return 0},c.freemem=function(){return Number.MAX_VALUE},c.totalmem=function(){return Number.MAX_VALUE},c.cpus=function(){return[]},c.type=function(){return"Browser"},c.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},c.networkInterfaces=c.getNetworkInterfaces=function(){return{}},c.arch=function(){return"javascript"},c.platform=function(){return"browser"},c.tmpdir=c.tmpDir=function(){return"/tmp"},c.EOL="\n"},{}],48:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:41}],49:[function(a,b){function c(){}var d=b.exports={};d.nextTick=function(){var a="undefined"!=typeof window&&window.setImmediate,b="undefined"!=typeof window&&window.MutationObserver,c="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(a)return function(a){return window.setImmediate(a)};var d=[];if(b){var e=document.createElement("div"),f=new MutationObserver(function(){var a=d.slice();d.length=0,a.forEach(function(a){a()})});return f.observe(e,{attributes:!0}),function(a){d.length||e.setAttribute("yes","no"),d.push(a)}}return c?(window.addEventListener("message",function(a){var b=a.source;if((b===window||null===b)&&"process-tick"===a.data&&(a.stopPropagation(),d.length>0)){var c=d.shift();c()}},!0),function(a){d.push(a),window.postMessage("process-tick","*")}):function(a){setTimeout(a,0)}}(),d.title="browser",d.browser=!0,d.env={},d.argv=[],d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.binding=function(){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(){throw new Error("process.chdir is not supported")}},{}],50:[function(a,b){b.exports="function"==typeof Object.create?function(a,b){a.super_=b,a.prototype=Object.create(b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})}:function(a,b){a.super_=b;var c=function(){};c.prototype=b.prototype,a.prototype=new c,a.prototype.constructor=a}},{}],51:[function(a,b){b.exports=function(a){return a&&"object"==typeof a&&"function"==typeof a.copy&&"function"==typeof a.fill&&"function"==typeof a.readUInt8}},{}],52:[function(a,b,c){(function(b,d){function e(a,b){var d={seen:[],stylize:g};return arguments.length>=3&&(d.depth=arguments[2]),arguments.length>=4&&(d.colors=arguments[3]),p(b)?d.showHidden=b:b&&c._extend(d,b),v(d.showHidden)&&(d.showHidden=!1),v(d.depth)&&(d.depth=2),v(d.colors)&&(d.colors=!1),v(d.customInspect)&&(d.customInspect=!0),d.colors&&(d.stylize=f),i(d,a,d.depth)}function f(a,b){var c=e.styles[b];return c?"["+e.colors[c][0]+"m"+a+"["+e.colors[c][1]+"m":a}function g(a){return a}function h(a){var b={};return a.forEach(function(a){b[a]=!0}),b}function i(a,b,d){if(a.customInspect&&b&&A(b.inspect)&&b.inspect!==c.inspect&&(!b.constructor||b.constructor.prototype!==b)){var e=b.inspect(d,a);return t(e)||(e=i(a,e,d)),e}var f=j(a,b);if(f)return f;var g=Object.keys(b),p=h(g);if(a.showHidden&&(g=Object.getOwnPropertyNames(b)),z(b)&&(g.indexOf("message")>=0||g.indexOf("description")>=0))return k(b);if(0===g.length){if(A(b)){var q=b.name?": "+b.name:"";return a.stylize("[Function"+q+"]","special")}if(w(b))return a.stylize(RegExp.prototype.toString.call(b),"regexp");if(y(b))return a.stylize(Date.prototype.toString.call(b),"date");if(z(b))return k(b)}var r="",s=!1,u=["{","}"];if(o(b)&&(s=!0,u=["[","]"]),A(b)){var v=b.name?": "+b.name:"";r=" [Function"+v+"]"}if(w(b)&&(r=" "+RegExp.prototype.toString.call(b)),y(b)&&(r=" "+Date.prototype.toUTCString.call(b)),z(b)&&(r=" "+k(b)),0===g.length&&(!s||0==b.length))return u[0]+r+u[1];if(0>d)return w(b)?a.stylize(RegExp.prototype.toString.call(b),"regexp"):a.stylize("[Object]","special");a.seen.push(b);var x;return x=s?l(a,b,d,p,g):g.map(function(c){return m(a,b,d,p,c,s)}),a.seen.pop(),n(x,r,u)}function j(a,b){if(v(b))return a.stylize("undefined","undefined");if(t(b)){var c="'"+JSON.stringify(b).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return a.stylize(c,"string")}return s(b)?a.stylize(""+b,"number"):p(b)?a.stylize(""+b,"boolean"):q(b)?a.stylize("null","null"):void 0}function k(a){return"["+Error.prototype.toString.call(a)+"]"}function l(a,b,c,d,e){for(var f=[],g=0,h=b.length;h>g;++g)f.push(F(b,String(g))?m(a,b,c,d,String(g),!0):"");return e.forEach(function(e){e.match(/^\d+$/)||f.push(m(a,b,c,d,e,!0))}),f}function m(a,b,c,d,e,f){var g,h,j;if(j=Object.getOwnPropertyDescriptor(b,e)||{value:b[e]},j.get?h=j.set?a.stylize("[Getter/Setter]","special"):a.stylize("[Getter]","special"):j.set&&(h=a.stylize("[Setter]","special")),F(d,e)||(g="["+e+"]"),h||(a.seen.indexOf(j.value)<0?(h=q(c)?i(a,j.value,null):i(a,j.value,c-1),h.indexOf("\n")>-1&&(h=f?h.split("\n").map(function(a){return"  "+a}).join("\n").substr(2):"\n"+h.split("\n").map(function(a){return"   "+a}).join("\n"))):h=a.stylize("[Circular]","special")),v(g)){if(f&&e.match(/^\d+$/))return h;g=JSON.stringify(""+e),g.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(g=g.substr(1,g.length-2),g=a.stylize(g,"name")):(g=g.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),g=a.stylize(g,"string"))}return g+": "+h}function n(a,b,c){var d=0,e=a.reduce(function(a,b){return d++,b.indexOf("\n")>=0&&d++,a+b.replace(/\u001b\[\d\d?m/g,"").length+1},0);return e>60?c[0]+(""===b?"":b+"\n ")+" "+a.join(",\n  ")+" "+c[1]:c[0]+b+" "+a.join(", ")+" "+c[1]}function o(a){return Array.isArray(a)}function p(a){return"boolean"==typeof a}function q(a){return null===a}function r(a){return null==a}function s(a){return"number"==typeof a}function t(a){return"string"==typeof a}function u(a){return"symbol"==typeof a}function v(a){return void 0===a}function w(a){return x(a)&&"[object RegExp]"===C(a)}function x(a){return"object"==typeof a&&null!==a}function y(a){return x(a)&&"[object Date]"===C(a)}function z(a){return x(a)&&("[object Error]"===C(a)||a instanceof Error)}function A(a){return"function"==typeof a}function B(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a||"undefined"==typeof a}function C(a){return Object.prototype.toString.call(a)}function D(a){return 10>a?"0"+a.toString(10):a.toString(10)}function E(){var a=new Date,b=[D(a.getHours()),D(a.getMinutes()),D(a.getSeconds())].join(":");return[a.getDate(),J[a.getMonth()],b].join(" ")}function F(a,b){return Object.prototype.hasOwnProperty.call(a,b)}var G=/%[sdj%]/g;c.format=function(a){if(!t(a)){for(var b=[],c=0;c<arguments.length;c++)b.push(e(arguments[c]));return b.join(" ")}for(var c=1,d=arguments,f=d.length,g=String(a).replace(G,function(a){if("%%"===a)return"%";if(c>=f)return a;switch(a){case"%s":return String(d[c++]);case"%d":return Number(d[c++]);case"%j":try{return JSON.stringify(d[c++])}catch(b){return"[Circular]"}default:return a}}),h=d[c];f>c;h=d[++c])g+=q(h)||!x(h)?" "+h:" "+e(h);return g},c.deprecate=function(a,e){function f(){if(!g){if(b.throwDeprecation)throw new Error(e);b.traceDeprecation?console.trace(e):console.error(e),g=!0}return a.apply(this,arguments)}if(v(d.process))return function(){return c.deprecate(a,e).apply(this,arguments)};if(b.noDeprecation===!0)return a;var g=!1;return f};var H,I={};c.debuglog=function(a){if(v(H)&&(H=b.env.NODE_DEBUG||""),a=a.toUpperCase(),!I[a])if(new RegExp("\\b"+a+"\\b","i").test(H)){var d=b.pid;I[a]=function(){var b=c.format.apply(c,arguments);console.error("%s %d: %s",a,d,b)}}else I[a]=function(){};return I[a]},c.inspect=e,e.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},e.styles={special:"cyan",number:"yellow","boolean":"yellow",undefined:"grey","null":"bold",string:"green",date:"magenta",regexp:"red"},c.isArray=o,c.isBoolean=p,c.isNull=q,c.isNullOrUndefined=r,c.isNumber=s,c.isString=t,c.isSymbol=u,c.isUndefined=v,c.isRegExp=w,c.isObject=x,c.isDate=y,c.isError=z,c.isFunction=A,c.isPrimitive=B,c.isBuffer=a("./support/isBuffer");var J=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];c.log=function(){console.log("%s - %s",E(),c.format.apply(c,arguments))},c.inherits=a("./support/inherits"),c._extend=function(a,b){if(!b||!x(b))return a;for(var c=Object.keys(b),d=c.length;d--;)a[c[d]]=b[c[d]];return a}}).call(this,a("_process"),"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/inherits":50,"./support/isBuffer":51,_process:41}],53:[function(){"function"!=typeof Object.create&&(Object.create=function(){var a=function(){};return function(b){if(arguments.length>1,"object"!=typeof b)throw TypeError("Argument must be an object");a.prototype=b;var c=new a;return a.prototype=null,c}}()),"function"!=typeof String.prototype.trim&&(String.prototype.trim||!function(){var a=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace(a,"")}}())},{}]},{},[1])(1)});