<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Dependency injection - bearcat</title>
        <meta charset="utf-8">
        <meta name="description" content="bearcat - magic, expressive javaScript objects powered world.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link href='http://fonts.googleapis.com/css?family=Source+Sans+Pro:400,600|Lato|Inconsolata' rel='stylesheet' type='text/css'>
        <link rel="icon" href="/images/logo.png" type="image/x-icon">
        <script>
            window.PAGE_TYPE = "guide"
        </script>
        <link rel="stylesheet" href="/css/page.css" type="text/css">

        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', '', 'bearcatjs.org');
  ga('send', 'pageview');
</script>
        <script src="/js/vue.min.js"></script>
        <link rel="stylesheet" href="/css/style.css">
        <link rel="stylesheet" href="/css/highlight.css">
        <!--link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/styles/default.min.css"-->
        <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.4/highlight.min.js"></script>
        <script type="text/javascript">
            hljs.initHighlightingOnLoad();
        </script>
    </head>
    <body>
        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        
        
            <div id="header">
    <a id="logo" href="/">
        <img src="/images/logo.png">
        <span>bearcat</span>
    </a>
    <ul id="nav">
        <li><a href="/guide/" class="nav-link current">Guide</a></li>
<li><a href="/api/" class="nav-link">API Reference</a></li>
<li><a href="/examples/" class="nav-link">Examples</a></li>
<li><a href="/blog/" class="nav-link">Blog</a></li>
<li><a href="https://github.com/beacatjs/bearcat" target="_blank" class="nav-link">GitHub</a></li>
    </ul>
</div>
        

        <div id="main">
            
                
    <div class="sidebar">
    <ul class="main-menu">
        <li><a href="/guide/" class="nav-link current">Guide</a></li>
<li><a href="/api/" class="nav-link">API Reference</a></li>
<li><a href="/examples/" class="nav-link">Examples</a></li>
<li><a href="/blog/" class="nav-link">Blog</a></li>
<li><a href="https://github.com/beacatjs/bearcat" target="_blank" class="nav-link">GitHub</a></li>
    </ul>
    <div class="list">
        <h2>Guide</h2>
        <ul class="menu-root">
            
                <li><a href="/guide/installation.html" class="sidebar-link">Installation</a></li>
            
                <li><a href="/guide/index.html" class="sidebar-link">Getting Started</a></li>
            
                <li><a href="/guide/dependency-injection.html" class="sidebar-link current">Dependency injection</a></li>
            
                <li><a href="/guide/aop.html" class="sidebar-link">Aspect Object Programming</a></li>
            
                <li><a href="/guide/consistent-configuration.html" class="sidebar-link">Consistent-configuration</a></li>
            
                <li><a href="/guide/magic-javaScript-objects-in-details.html" class="sidebar-link">Magic javaScripts objects</a></li>
            
                <li><a href="/guide/context-json.html" class="sidebar-link">context.json</a></li>
            
                <li><a href="/guide/bearcat-bootstrap.html" class="sidebar-link">bearcat-bootstrap.js</a></li>
            
                <li><a href="/guide/faq.html" class="sidebar-link">Common FAQs</a></li>
            
        </ul>
    </div>
</div>

<div class="content guide with-sidebar">
    <h1>Dependency injection</h1>
    <h2 id="Container_Overview">Container Overview</h2>
<p>Inversion of Control (IoC) is a design pattern that addresses a component’s dependency resolution, configuration and lifecycle. IoC is best understood through the Hollywood Principle: “Dont’s call us, we’ll call you”. Bearcat implements IoC with dependency injection (DI). That is components do not look up, they provide plain simple configuration metadata enabling the container to resolve dependencies. The container is wholly responsible for wiring up components, passing resolved objects into JavaScript Object properties or constructors. Bearcat implements the container with basic <strong><em>beanFactory</em></strong> and high-level <strong><em>applicationContext</em></strong></p>
<h2 id="Configuration_metadata">Configuration metadata</h2>
<p>Configuration metadata is the key point for developers to tell the Bearcat container to instantiate, configure, and assemble the objects in your application.<br>In bearcat, configuration metadata is embeded into javaScript objects with some syntax sugars as showed below.   </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> JsObject = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    <span class="keyword">this</span>.$id = <span class="string">"jsObject"</span>;</div><div class="line">}</div><div class="line">  </div><div class="line">bearcat.module(JsObject, <span class="keyword">typeof</span> <span class="built_in">module</span> !== <span class="string">'undefined'</span> ? <span class="built_in">module</span> : {});</div></pre></td></tr></table></figure>

<p>These javaScript objects also called <strong><em>bean</em></strong> as a nick or for short.    </p>
<p>The <strong><em>$id</em></strong> property with its value is a string that you use to indentify the individual bean definition. The <strong><em>JsObject</em></strong>  is a function defines the constructor function for this bean, which will be registered to bearcat through bearcat api (for frontend browser) or just using ‘module.exports’ (for backend nodejs).  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">bearcat.module(<span class="built_in">Function</span>, Module);</div></pre></td></tr></table></figure>



<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> JsObject = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    <span class="keyword">this</span>.$id = <span class="string">"jsObject"</span>;</div><div class="line">}</div><div class="line">  </div><div class="line"><span class="built_in">module</span>.exports = JsObject;</div></pre></td></tr></table></figure>

<h2 id="Instantiating_a_container">Instantiating a container</h2>
<p>Instantiating a Bearcat IoC container is straightforward. Just pass the <strong><em>context.json</em></strong> defined paths to <strong><em>bearcat.createApp</em></strong> factory function (for backend nodejs) or use auto-generated <strong><em>bearcat-bootstrap.js</em></strong> (for frontend browser).  </p>
<h3 id="frontend_browser">frontend browser</h3>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"./libs/bearcat.standalone.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">src</span>=<span class="value">"./bearcat-bootstrap.js"</span>&gt;</span><span class="javascript"></span><span class="tag">&lt;/<span class="title">script</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="title">script</span> <span class="attribute">type</span>=<span class="value">"text/javascript"</span>&gt;</span><span class="javascript"></span></div><div class="line">bearcat.createApp();</div><div class="line">bearcat.start(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'bearcat IoC container started'</span>);</div><div class="line">});</div></pre></td></tr></table></figure>

<h3 id="backend_nodejs">backend nodejs</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bearcat = <span class="built_in">require</span>(<span class="string">'bearcat'</span>);</div><div class="line"><span class="keyword">var</span> configPaths = [<span class="string">'path/to/context.json'</span>];</div><div class="line"></div><div class="line">bearcat.createApp(configPaths);</div><div class="line">bearcat.start(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'bearcat IoC container started'</span>);</div><div class="line">});</div></pre></td></tr></table></figure>

<h2 id="Using_the_container">Using the container</h2>
<p>When container started, you just use <strong><em>getBean</em></strong> method to retrieve instances of your beans.  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> bearcat = <span class="built_in">require</span>(<span class="string">'bearcat'</span>);</div><div class="line"><span class="keyword">var</span> configPaths = [<span class="string">'path/to/context.json'</span>];</div><div class="line"></div><div class="line">bearcat.createApp(configPaths);</div><div class="line">bearcat.start(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    <span class="built_in">console</span>.log(<span class="string">'bearcat IoC container started'</span>);</div><div class="line">    <span class="keyword">var</span> dog = bearcat.getBean(<span class="string">'dog'</span>);</div><div class="line">    dog.bite(); <span class="comment">// call bite method</span></div><div class="line">});</div></pre></td></tr></table></figure>

<h2 id="Bean_overview">Bean overview</h2>
<p>simple javaScript objects managed in bearcat IoC container are called <strong><em>Beans</em></strong>. These beans are created with the configuration metadata that you supply to the container.  </p>
<h2 id="Instantiating_beans">Instantiating beans</h2>
<p>A bean definition essentially is a recipe for creating one or more objects. The container looks at the recipe for a named bean when asked, and uses the configuration metadata encapsulated by that bean definition to create (or acquire) an actual object.  </p>
<h3 id="Instantiation_with_a_constructor">Instantiation with a constructor</h3>
<p>In Bearcat, instantiation with a constructor is quite easy, with self-described configuration metadata you can specify your bean class as follows:  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Bean = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">this</span>.$id = <span class="string">"beanId"</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Bean;</div></pre></td></tr></table></figure>

<h3 id="Instantiation_using_an_instance_factory_method">Instantiation using an instance factory method</h3>
<p>To use this mechanism, add the <strong><em>factoryBean</em></strong> attribute, specify the name of a bean in the current container and the instance method that is to be invoked to create the Object. Set the name of the factory method itself with the <strong><em>factoryMethod</em></strong> attribute.  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">this</span>.$id = <span class="string">"car"</span>;</div><div class="line">	<span class="keyword">this</span>.$factoryBean = <span class="string">"carFactory"</span>;</div><div class="line">	<span class="keyword">this</span>.$factoryMethod = <span class="string">"createCar"</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Car;</div></pre></td></tr></table></figure>

<p>carFactory.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="built_in">require</span>(<span class="string">'./car'</span>);</div><div class="line"></div><div class="line"><span class="keyword">var</span> CarFactory = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">this</span>.$id = <span class="string">"carFactory"</span>;</div><div class="line">}</div><div class="line"></div><div class="line">CarFactory.prototype.createCar = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'CarFactory createCar...'</span>);</div><div class="line">	<span class="keyword">return</span> <span class="keyword">new</span> Car();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = CarFactory;</div></pre></td></tr></table></figure>

<h2 id="Dependencies">Dependencies</h2>
<p>Dependency injection (DI) is a process whereby objects define their dependencies, that is, the other objects they work with, only through constructor arguments, arguments to a factory method, or properties that are set on the object instance after it is constructed or returned from a factory method. The container then injects those dependencies when it creates the bean. This process is fundamentally the inverse, hence the name Inversion of Control (IoC), of the bean itself controlling the instantiation or location of its dependencies on its own by using direct construction of classes, or the Service Locator pattern.<br>Code is cleaner with the DI principle and decoupling is more effective when objects are provided with their dependencies. The object does not look up its dependencies, and does not know the location or class of the dependencies. As such, your classes become easier to test, in particular when the dependencies are on interfaces or abstract base classes, which allow for stub or mock implementations to be used in unit tests.  </p>
<p>DI exists in two major variants, <a href="#Constructor-based_dependency_injection">Constructor-based dependency injection</a> and <a href="#Properties-based_dependency_injection">Properties-based dependency injection</a>.  </p>
<h3 id="Constructor-based_dependency_injection">Constructor-based dependency injection</h3>
<p>Constructor-based DI is accomplished by the container invoking a constructor with a number of arguments, each representing a dependency.<br>car.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// the Car has a dependency on an Engine</span></div><div class="line"><span class="comment">// a constructor so that the Bearcat container can inject an Engine</span></div><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span><span class="params">($engine)</span> </span>{</div><div class="line">	<span class="keyword">this</span>.$id = <span class="string">"car"</span>;</div><div class="line">	<span class="keyword">this</span>.$engine = $engine;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run car...'</span>);</div><div class="line">	<span class="keyword">this</span>.$engine.run();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Car;</div></pre></td></tr></table></figure>

<p>engine.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Engine = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">this</span>.$id = <span class="string">"engine"</span>;</div><div class="line">}</div><div class="line"></div><div class="line">Engine.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run engine...'</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Engine;</div></pre></td></tr></table></figure>

<p>Besides inject a bean into the constructor, you can specify to inject <strong><em>var</em></strong> into the constructor.  </p>
<p>inject var example:<br>car.js  </p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span><span class="params">(num)</span> </span>{</div><div class="line">	<span class="keyword">this</span>.$id = <span class="string">"car"</span>;</div><div class="line">	<span class="keyword">this</span>.$Tnum = num;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run car...'</span>);</div><div class="line">	<span class="keyword">return</span> <span class="string">'car '</span> + <span class="keyword">this</span>.num;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Car;</div></pre></td></tr></table></figure>

<p>main.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> car = bearcat.getBean(<span class="string">'car'</span>, <span class="number">100</span>);</div><div class="line">car.run(); <span class="comment">// car 100</span></div></pre></td></tr></table></figure>



<p>use the attribute with the prefix <strong><em>$T</em></strong> to specify the  to be injected into the constructor with the argument named <strong><em>num</em></strong>  </p>
<p>main.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> car = bearcat.getBean(<span class="string">'car'</span>, <span class="number">100</span>);</div><div class="line">car.run(); <span class="comment">// car 100</span></div></pre></td></tr></table></figure>



<p>use the <strong><em>type</em></strong> attribute to specify the var type to be injected into the constructor with the argument named <strong><em>num</em></strong><br>type can be <strong><em>Object</em></strong>, <strong><em>Number</em></strong>, <strong><em>Array</em></strong>, <strong><em>Boolean</em></strong>, <strong><em>Function</em></strong>, <strong><em>String</em></strong>  </p>
<h3 id="Properties-based_dependency_injection">Properties-based dependency injection</h3>
<p>Properties-based DI is accomplished by the container setting properties dynamicly.<br>car.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// the Car has a dependency on an Engine</span></div><div class="line"><span class="comment">// in constructor specify the engine properties to null for V8 optimization</span></div><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">this</span>.engine = <span class="literal">null</span>;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run car...'</span>);</div><div class="line">	<span class="keyword">this</span>.engine.run();</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Car;</div></pre></td></tr></table></figure>

<p>engine.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Engine = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{}</div><div class="line"></div><div class="line">Engine.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run engine...'</span>);</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Engine;</div></pre></td></tr></table></figure>

<p>context.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	"<span class="attribute">name</span>": <span class="value"><span class="string">"simple_inject_args"</span></span>,</div><div class="line">	"<span class="attribute">beans</span>": <span class="value">[{</span></div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">props</span>": <span class="value">[{</span></div><div class="line">			"<span class="attribute">name</span>": <span class="value"><span class="string">"engine"</span></span>,</div><div class="line">			"<span class="attribute">ref</span>": <span class="value"><span class="string">"engine"</span></span></div><div class="line">		}]</div><div class="line">	}, {</div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"engine"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"engine"</span></span></div><div class="line">	}]</div><div class="line">}</div></pre></td></tr></table></figure>

<p>in context.json configuration metadata, use the <strong><em>props</em></strong> attribute to specify the Properties-based DI. In <strong><em>props</em></strong> attribute, use the <strong><em>name</em></strong> attribute to specify the name of the properties, and the <strong><em>ref</em></strong> attribute to specify the name of the bean in the current container. </p>
<p>like the <a href="#constructor-based-dependency-injection">Constructor-based dependency injection</a>, you can also specify to inject <strong><em>value</em></strong> into the properties.  </p>
<p>inject value example:<br>car.js  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">this</span>.num = <span class="literal">null</span>;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run car...'</span>);</div><div class="line">	<span class="keyword">return</span> <span class="string">'car '</span> + <span class="keyword">this</span>.num;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Car;</div></pre></td></tr></table></figure>

<p>context.json  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	"<span class="attribute">name</span>": <span class="value"><span class="string">"simple_args_value"</span></span>,</div><div class="line">	"<span class="attribute">beans</span>": <span class="value">[{</span></div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">props</span>": <span class="value">[{</span></div><div class="line">			"<span class="attribute">name</span>": <span class="value"><span class="string">"num"</span></span>,</div><div class="line">			"<span class="attribute">value</span>": <span class="value"><span class="number">100</span></span></div><div class="line">		}]</div><div class="line">	}]</div><div class="line">}</div></pre></td></tr></table></figure>

<p>main.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> car = bearcat.getBean(<span class="string">'car'</span>);</div><div class="line">car.run(); <span class="comment">// car 100</span></div></pre></td></tr></table></figure>



<p>Note: there is no need for Properties-based dependency injection to inject var type into the properties  </p>
<h3 id="Lazy-initialized_beans">Lazy-initialized beans</h3>
<p>By default, ApplicationContext implementations eagerly create and configure all singleton beans as part of the initialization process. Generally, this pre-instantiation is desirable, because errors in the configuration or surrounding environment are discovered immediately, as opposed to hours or even days later. When this behavior is not desirable, you can prevent pre-instantiation of a singleton bean by marking the bean definition as lazy-initialized. A lazy-initialized bean tells the IoC container to create a bean instance when it is first requested, rather than at startup.  </p>
<p>In JSON, this behavior is controlled by the <strong><em>lazy</em></strong> attribute, for example:<br>context.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	"<span class="attribute">name</span>": <span class="value"><span class="string">"simple_lazy_init"</span></span>,</div><div class="line">	"<span class="attribute">beans</span>": <span class="value">[{</span></div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">lazy</span>": <span class="value"><span class="literal">true</span></span></div><div class="line">	}]</div><div class="line">}</div></pre></td></tr></table></figure>

<h2 id="Bean_scopes">Bean scopes</h2>
<p>When you create a bean definition, you create a recipe for creating actual instances of the class defined by that bean definition. The idea that a bean definition is a recipe is important, because it means that, as with a class, you can create many object instances from a single recipe.  </p>
<p>You can control not only the various dependencies and configuration values that are to be plugged into an object that is created from a particular bean definition, but also the scope of the objects created from a particular bean definition.  </p>
<p>You can use <strong><em>scope</em></strong> attribute to specify the scope of the bean.  </p>
<h3 id="The_singleton_scope">The singleton scope</h3>
<p>Only one shared instance of a singleton bean is managed, and all requests for beans with an id or ids matching that bean definition result in that one specific bean instance being returned by the Bearcat container. The singleton beans will preInstantiate by default.  </p>
<p>By default, scope is singleton  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	"<span class="attribute">name</span>": <span class="value"><span class="string">"simple"</span></span>,</div><div class="line">	"<span class="attribute">beans</span>": <span class="value">[{</span></div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">scope</span>": <span class="value"><span class="string">"singleton"</span></span></div><div class="line">	}]</div><div class="line">}</div></pre></td></tr></table></figure>

<p>main.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> car1 = bearcat.getBean(<span class="string">'car'</span>);</div><div class="line"><span class="keyword">var</span> car2 = bearcat.getBean(<span class="string">'car'</span>);</div><div class="line"><span class="comment">// car2 is exactly the same instance as car1</span></div></pre></td></tr></table></figure>

<h3 id="The_prototype_scope">The prototype scope</h3>
<p>The non-singleton, prototype scope of bean deployment results in the creation of a new bean instance every time a request for that specific bean is made. That is, the bean is injected into another bean or you request it through a getBean() method call on the container. As a rule, use the prototype scope for all stateful beans and the singleton scope for stateless beans.  </p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	"<span class="attribute">name</span>": <span class="value"><span class="string">"simple"</span></span>,</div><div class="line">	"<span class="attribute">beans</span>": <span class="value">[{</span></div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">scope</span>": <span class="value"><span class="string">"prototype"</span></span></div><div class="line">	}]</div><div class="line">}</div></pre></td></tr></table></figure>

<p>main.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> car1 = bearcat.getBean(<span class="string">'car'</span>);</div><div class="line"><span class="keyword">var</span> car2 = bearcat.getBean(<span class="string">'car'</span>);</div><div class="line"><span class="comment">// car2 is not the same instance as car1</span></div></pre></td></tr></table></figure>

<h2 id="Customizing_the_nature_of_a_bean">Customizing the nature of a bean</h2>
<h3 id="Lifecycle_callbacks">Lifecycle callbacks</h3>
<p>To interact with the container’s management of the bean lifecycle, you can add <strong><em>init</em></strong> and <strong><em>destroy</em></strong> method with the attribute <strong><em>init</em></strong> and <strong><em>destroy</em></strong>.  </p>
<h4 id="Initialization_method">Initialization method</h4>
<p>car.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">this</span>.num = <span class="number">0</span>;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.init = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'init car...'</span>);</div><div class="line">	<span class="keyword">this</span>.num = <span class="number">1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="string">'init car'</span>;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run car...'</span>);</div><div class="line">	<span class="keyword">return</span> <span class="string">'car '</span> + <span class="keyword">this</span>.num;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Car;</div></pre></td></tr></table></figure>

<p>context.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	"<span class="attribute">name</span>": <span class="value"><span class="string">"simple_init_method"</span></span>,</div><div class="line">	"<span class="attribute">beans</span>": <span class="value">[{</span></div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">scope</span>": <span class="value"><span class="string">"prototype"</span></span>,</div><div class="line">		"<span class="attribute">init</span>": <span class="value"><span class="string">"init"</span></span></div><div class="line">	}]</div><div class="line">}</div></pre></td></tr></table></figure>

<p>when car is requested by <strong><em>getBean</em></strong> invoke, init method will be called to do some init actions  </p>
<h4 id="Destruction_method">Destruction method</h4>
<p>car.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.destroy = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'destroy car...'</span>);</div><div class="line">	<span class="keyword">return</span> <span class="string">'destroy car'</span>;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run car...'</span>);</div><div class="line">	<span class="keyword">return</span> <span class="string">'car'</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Car;</div></pre></td></tr></table></figure>

<p>context.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	"<span class="attribute">name</span>": <span class="value"><span class="string">"simple_destroy_method"</span></span>,</div><div class="line">	"<span class="attribute">beans</span>": <span class="value">[{</span></div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">destroy</span>": <span class="value"><span class="string">"destroy"</span></span></div><div class="line">	}]</div><div class="line">}</div></pre></td></tr></table></figure>

<h4 id="Async_Initialization_method">Async Initialization method</h4>
<p>In Node, almost everything is async, so async initialization is quite common.<br>When async initialization is required, use the <strong><em>async</em></strong> attribute to specify a async initialization method and in the function method, call <strong><em>cb</em></strong> callback function to end the async init action.<br>When multiple async initializations are required, use the <strong><em>order</em></strong> attribute to specify the order of the bean initialization.  </p>
<p>car.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Car = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="keyword">this</span>.num = <span class="number">0</span>;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.init = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'init car...'</span>);</div><div class="line">	<span class="keyword">this</span>.num = <span class="number">1</span>;</div><div class="line">	<span class="keyword">return</span> <span class="string">'init car'</span>;</div><div class="line">}</div><div class="line"></div><div class="line">Car.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run car...'</span>);</div><div class="line">	<span class="keyword">return</span> <span class="string">'car '</span> + <span class="keyword">this</span>.num;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Car;</div></pre></td></tr></table></figure>

<p>wheel.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> Wheel = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{}</div><div class="line"></div><div class="line">Wheel.prototype.init = <span class="function"><span class="keyword">function</span><span class="params">(cb)</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'init wheel...'</span>);</div><div class="line">	setTimeout(<span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">		<span class="built_in">console</span>.log(<span class="string">'asyncInit setTimeout'</span>);</div><div class="line">		cb();</div><div class="line">	}, <span class="number">1000</span>);</div><div class="line">}</div><div class="line"></div><div class="line">Wheel.prototype.run = <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">	<span class="built_in">console</span>.log(<span class="string">'run wheel...'</span>);</div><div class="line">	<span class="keyword">return</span> <span class="string">'wheel'</span>;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="built_in">module</span>.exports = Wheel;</div></pre></td></tr></table></figure>

<p>contxt.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">{</div><div class="line">	"<span class="attribute">name</span>": <span class="value"><span class="string">"simple_async_init"</span></span>,</div><div class="line">	"<span class="attribute">beans</span>": <span class="value">[{</span></div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"car"</span></span>,</div><div class="line">		"<span class="attribute">init</span>": <span class="value"><span class="string">"init"</span></span>,</div><div class="line">		"<span class="attribute">order</span>": <span class="value"><span class="number">2</span></span></div><div class="line">	}, {</div><div class="line">		"<span class="attribute">id</span>": <span class="value"><span class="string">"wheel"</span></span>,</div><div class="line">		"<span class="attribute">func</span>": <span class="value"><span class="string">"wheel"</span></span>,</div><div class="line">		"<span class="attribute">async</span>": <span class="value"><span class="literal">true</span></span>,</div><div class="line">		"<span class="attribute">init</span>": <span class="value"><span class="string">"init"</span></span>,</div><div class="line">		"<span class="attribute">order</span>": <span class="value"><span class="number">1</span></span></div><div class="line">	}]</div><div class="line">}</div></pre></td></tr></table></figure>

<p>in this example, wheel has an async initialization method and must be init before car, so besides set the <strong><em>async</em></strong> attribute to true, should set the <strong><em>order</em></strong> attribute to to smaller than the car’s.  </p>
<h2 id="Bean_definition_inheritance">Bean definition inheritance</h2>
<p>A bean definition can contain a lot of configuration information, including constructor arguments, property values, and container-specific information such as initialization method, static factory method name, and so on. A child bean definition inherits configuration data from a parent definition. The child definition can override some values, or add others, as needed. Using parent and child bean definitions can save a lot of typing. Effectively, this is a form of templating.  </p>
<p>In Bearcat, use the <strong><em>parent</em></strong> to specify the parent bean to inherit the bean definition.<br>Besides bean definition inheritance, child bean will inherit methods from parent bean’s prototype which it does not have  </p>
<p>bus.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> <span class="type">Bus</span> = function(engine, wheel, num) {</div><div class="line">	this.engine = engine;</div><div class="line">	this.wheel = wheel;</div><div class="line">	this.num = num;</div><div class="line">}</div><div class="line"></div><div class="line"><span class="type">Bus</span>.prototype.run = function() {</div><div class="line">	<span class="keyword">return</span> 'bus ' + this.num;</div><div class="line">}</div><div class="line"></div><div class="line">module.exports = {</div><div class="line">	func: <span class="type">Bus</span>,</div><div class="line">	id: <span class="string">"bus"</span>,</div><div class="line">	parent: <span class="string">"car"</span>,</div><div class="line">	args: [{</div><div class="line">		name: <span class="string">"engine"</span>,</div><div class="line">		<span class="keyword">ref</span>: <span class="string">"engine"</span></div><div class="line">	}, {</div><div class="line">		name: <span class="string">"wheel"</span>,</div><div class="line">		<span class="keyword">ref</span>: <span class="string">"wheel"</span></div><div class="line">	}]</div><div class="line">};</div></pre></td></tr></table></figure>

<p>car.js</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> n = <span class="number">1</span>;</div><div class="line"></div><div class="line"><span class="keyword">var</span> <span class="type">Car</span> = function(engine, wheel, num) {</div><div class="line">	this.engine = engine;</div><div class="line">	this.wheel = wheel;</div><div class="line">	this.num = num;</div><div class="line">	n++;</div><div class="line">};</div><div class="line"></div><div class="line"><span class="type">Car</span>.prototype.run = function() {</div><div class="line">	this.engine.start();</div><div class="line">	this.wheel.run();</div><div class="line">	console.log(this.num);</div><div class="line">}</div><div class="line"></div><div class="line">module.exports = {</div><div class="line">	func: <span class="type">Car</span>,</div><div class="line">	id: <span class="string">"car"</span>,</div><div class="line">	args: [{</div><div class="line">		name: <span class="string">"engine"</span>,</div><div class="line">		<span class="keyword">ref</span>: <span class="string">"engine"</span></div><div class="line">	}, {</div><div class="line">		name: <span class="string">"num"</span>,</div><div class="line">		value: <span class="number">100</span></div><div class="line">	}, {</div><div class="line">		name: <span class="string">"wheel"</span>,</div><div class="line">		<span class="keyword">ref</span>: <span class="string">"wheel"</span></div><div class="line">	}],</div><div class="line">	order: <span class="number">1</span></div><div class="line">};</div></pre></td></tr></table></figure>

<p>in this example, bus has a parent bean car, and it will inherit the bean definition from car, therefore, bus has the num with value of 100 which is inherited from car.  </p>
<h2 id="Abstract_bean">Abstract bean</h2>
<p>When a bean is marked as an abstract bean, it is usable only as a pure template bean definition that servers as a parent definition for child definitions. It is abstract and can not be initialized by <strong><em>getBean</em></strong> method, you can get the abstract bean constructor function by <strong><em>bearcat.getFunction</em></strong> method to handle child inherition. Similarly, the container’s internal preInstantiateSingletons() method ignores bean definitions that are defined as abstract.  </p>

    <div class="footer">Caught a mistake or want to contribute to the documentation? <a href="https://github.com/bearcatjs/bearcatjs.org" target="_blank">Fork this site on Github</a>!</div>
</div>
            
        </div>

        
            <script src="/js/smooth-scroll.min.js"></script>
            <script src="/js/common.js"></script>
        

    </body>
</html>